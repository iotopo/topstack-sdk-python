{"info":{"title":"TopStack Open API V5","description":"","version":"1.0.0"},"openapi":"3.0.0","servers":[{"url":"","description":"默认环境","variables":{}},{"url":"http://localhost:8000","description":"开发环境","variables":{"ApiKey":{"default":"8mphozy98fkor6iu","description":"认证密码"},"ProjectID":{"default":"iotopo","description":"项目ID"}}}],"paths":{"/iot/open_api/v1/device/query":{"get":{"summary":"分页查询","description":"","tags":["设备互联/设备"],"parameters":[{"name":"","in":"query","description":"","required":true,"example":"","schema":{"type":"string"}},{"name":"pageNum","in":"query","description":"当前页序列，第一页为 1","required":false,"example":"","schema":{"type":"integer"}},{"name":"pageSize","in":"query","description":"每页显示的数量，默认为 10","required":false,"example":"","schema":{"type":"integer"}},{"name":"search","in":"query","description":"按名称或标识进行搜索","required":false,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":[],"example":"{\r\n  \"data\": {\r\n    \"total\": 114,\r\n    \"items\": [\r\n      {\r\n        \"id\": \"01\",\r\n        \"name\": \"温湿度传感器\",\r\n        \"description\": \"\",\r\n        \"gatewayID\": \"TLG20210903001\",\r\n        \"gatewayName\": \"Toplink-33\",\r\n        \"typeID\": \"deviceType0\",\r\n        \"typeName\": \"引擎测试设备类型0\",\r\n        \"template\": false,\r\n        \"address\": \"\",\r\n        \"userGroupID\": \"c79qj3le97elq1h0801g\",\r\n        \"userGroupName\": \"测试组1\",\r\n        \"dataChannelID\": \"\",\r\n        \"dataChannelName\": \"\",\r\n        \"state\": 0,\r\n        \"stateChangeTime\": \"2022-01-10T14:49:43.843765+08:00\",\r\n        \"createdAt\": \"2021-09-27T09:26:07.774105+08:00\",\r\n        \"updatedAt\": \"2022-01-10T14:49:44.03248+08:00\",\r\n        \"hasProps\": true,\r\n        \"editable\": true\r\n      }\r\n    ]\r\n  },\r\n  \"code\": \"\",\r\n  \"msg\": \"\"\r\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/iot/open_api/v1/data/findLast":{"post":{"summary":"单点实时数据查询","description":"","tags":["数据接口/实时数据查询"],"parameters":[],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"pointID":{"type":"string","example":"","description":"点位标识"},"deviceID":{"type":"string","example":"","description":"设备标识"}},"required":["pointID","deviceID"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","title":"data","required":["success","data","msg"],"properties":{"type":"array","data":{"type":"object","required":["results"],"properties":{"results":{"type":"array","items":{"type":"object","title":"Items","required":[],"properties":{"deviceID":{"type":"string","description":"设备标识"},"pointID":{"type":"string","description":"点位标识"},"values":{"type":"array","items":{"type":"object","title":"Items","required":[],"properties":{"value":{"type":"anyOf","anyOf":[{"type":"string"},{"type":"number"},{"type":"boolean"}],"description":"返回值"},"time":{"type":"string","description":"时间戳"}},"description":""},"description":""}}},"title":"results","properties":{"type":"array","items":{"type":"object","title":"Items","required":[],"properties":{"deviceID":{"type":"string"},"pointID":{"type":"string"},"values":{"type":"array","items":{"type":"object","title":"Items","required":[],"properties":{"value":{"type":"anyOf","allOf":[{"type":"string"}],"anyOf":[{"type":"number"},{"type":"boolean"},{"type":"string"}]},"time":{"type":"string"}}}}}}},"description":""}}},"success":{"mock":{"mock":""},"type":"boolean","description":"响应状态，true 表示成功 false 表示失败"},"msg":{"mock":{"mock":""},"type":"string","description":"错误信息"}}},"example":""}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/iot/open_api/v1/data/findLastBatch":{"post":{"summary":"多点实时数据查询","description":"待查询值的点位列表，数组最⼤个数为100。格式：[{\"deviceID\": \"string\", \"pointID\":\"string\"}]其中deviceID为设备标识，pointID为点位标识。","tags":["数据接口/实时数据查询"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object"},"example":"[\r\n    {\"deviceID\": \"YG01\", \"pointID\":\"Test\"},\r\n    {\"deviceID\": \"YG01\", \"pointID\":\"Volume\"}\r\n]"}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","items":{"type":"object","title":"Items","required":[],"properties":{"pointID":{"type":"string","description":"点位"},"deviceID":{"type":"string","description":"设备标识"}},"APIPOST_ORDERS":["deviceID","pointID"]},"required":[],"properties":{"data":{"type":"array","items":{"type":"object","title":"Items","required":[],"properties":{"deviceID":{"type":"string","description":"设备标识"},"pointID":{"type":"string","description":"点位标识"},"value":{"type":"anyOf","anyOf":[{"type":"string"},{"type":"number"},{"type":"boolean"}],"description":"返回值"},"quality":{"type":"number","description":"数据质量，0 正常、1 离线、2 无效"},"timestamp":{"type":"string","description":"时间戳，ISO 8601格式: YYYY-MM-DDTHH:MM:SSZ"}}}},"success":{"type":"boolean"}}},"example":"{\n\t\"data\": [\n\t\t{\n\t\t\t\"deviceID\": \"经他按带多认日手组解通感正严立命走省者道三响别\",\n\t\t\t\"pointID\": \"与叫\",\n\t\t\t\"value\": 5805901818002551,\n\t\t\t\"quality\": -5080681549124723,\n\t\t\t\"timestamp\": \"们干除列单场政\"\n\t\t}\n\t],\n\t\"success\": false\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/iot/open_api/v1/data/query":{"post":{"summary":"历史数据查询","description":"","tags":["数据接口/历史数据查询"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object"},"example":"{\n\t\"points\": [\n\t\t{\n\t\t\t\"pointID\": \"Level\",\n\t\t\t\"deviceID\": \"YG01\"\n\t\t},\n\t\t{\n\t\t\t\"pointID\": \"T\",\n\t\t\t\"deviceID\": \"YG01\"\n\t\t},\n\t\t{\n\t\t\t\"pointID\": \"Volume\",\n\t\t\t\"deviceID\": \"YG01\"\n\t\t}\n\t],\n\t\"start\": \"2024-06-11T06:17:17.469Z\",\n\t\"end\": \"2024-06-11T06:22:17.469Z\",\n\t\"aggregation\": \"first\",\n\t\"interval\": \"5s\",\n\t\"offset\": 0,\n\t\"limit\": 5000\n}"}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":[],"properties":{"data":{"type":"object","required":[],"properties":{"results":{"type":"array","items":{"type":"object","title":"Items","required":[],"properties":{"deviceID":{"mock":{"mock":"@string( deviceID, 1, 10 )"},"type":"string","description":"设备标识"},"pointID":{"mock":{"mock":"@string( pointID, 1, 10 )"},"type":"string","description":"点位标识"},"values":{"type":"array","items":{"type":"object","title":"Items","required":[],"properties":{"value":{"type":"anyOf","anyOf":[{"type":"string"},{"mock":{"mock":""},"type":"number"},{"type":"boolean"}],"description":"返回值"},"time":{"mock":{"mock":"@datetime('yyyy-MM-dd HH:mm:ss')"},"type":"string","description":"时间戳，ISO 8601格式: YYYY-MM-DDTHH:MM:SSZ"}}}}}}}}},"success":{"type":"boolean","description":"响应状态，true 表示成功 false 表示失败"}}},"example":"{\n\t\"data\": {\n\t\t\"results\": [\n\t\t\t{\n\t\t\t\t\"deviceID\": \"YG01\",\n\t\t\t\t\"pointID\": \"T\",\n\t\t\t\t\"values\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"value\": false,\n\t\t\t\t\t\t\"time\": \"1982-07-03 11:03:29\"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t},\n\t\"success\": false\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/iot/open_api/v1/data/setValue":{"post":{"summary":"单点下发","description":"","tags":["数据接口/控制指令下发"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object"},"example":"{\r\n    \"gatewayID\": \"\",\r\n    \"deviceID\":\"Dev01\",\r\n    \"pointID\":\"V4\",\r\n    \"value\": \"23\"\r\n}"}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":[],"properties":{"success":{"type":"boolean","description":"响应状态，true 表示成功 false 表示失败"}}},"example":"{\n\t\"success\": true\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":{"type":"object"},"example":""}}}}}},"/iot/open_api/v1/data/batchSetValue":{"post":{"summary":"批量下发","description":"多点写入用于实现多个点位的批量写入操作。可以一次性下发多个设备的控制命令。\n写入内容采用 json 格式，可以下发多个设备下的多个点位值。每次请求只允许写入同一个网关或同一个直连通道下的设备。\n请求内容示例：\n`{ \n    \"device-001\": { // 设备序列号：device-001\n        \"DO1\": \"true\", // 开关量 DO1 控制输出\n        \"DO2\": \"true\",\n        \"DO3\": \"false\",\n        \"AI1\": \"100\"\n    },\n    \"device-002\": {\n        \"DO1\": \"true\",\n        \"DO2\": \"true\",\n        \"DO3\": \"false\",\n        \"AI1\": \"200\"\n    }\n}`","tags":["数据接口/控制指令下发"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object"},"example":"{\r\n    \"Dev01\": {\r\n        \"V4\": \"10\"\r\n    }\r\n}"}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":[],"properties":{"success":{"type":"boolean"}}},"example":"{\n\t\"success\": false\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":{"type":"object"},"example":""}}}}}},"/alert/open_api/v1/alert_level":{"post":{"summary":"新增","description":"","tags":["告警中心/告警等级"],"parameters":[{"name":"X-ProjectID","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}},{"name":"X-API-KEY","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"body":{"type":"object","example":"","description":"示例：{  \"value\": 6,  \"color\": \"#fff\",  \"label\": \"测试等级\"}，value：告警等级值，color：告警等级颜色，label：告警等级名称"}},"required":["body"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":[],"properties":{"data":{"type":"string"},"success":{"type":"boolean","description":""}}},"example":""}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}},"put":{"summary":"修改","description":"","tags":["告警中心/告警等级"],"parameters":[{"name":"X-ProjectID","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}},{"name":"X-API-KEY","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"body":{"type":"string","example":"","description":"示例：{  \"id\": \"c8o4uhde97etfjrc77k0\",  \"value\": 6,  \"color\": \"#000\",  \"label\": \"修改等级\"}，id：告警等级id，value：告警等级值，color：告警等级颜色，label：告警等级名称"}},"required":["body"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":[],"properties":{"data":{"mock":{"mock":"@string( qwertyuiopasdfghjklzxcvbnm, 1, 10 )"},"type":"string"},"success":{"type":"boolean"}}},"example":"{\n\t\"data\": \"bwsgklhnf\",\n\t\"success\": false\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}},"delete":{"summary":"删除","description":"","tags":["告警中心/告警等级"],"parameters":[{"name":"X-ProjectID","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}},{"name":"X-API-KEY","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"body":{"type":"object","example":"","description":"{value：}"}},"required":["body"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":[],"properties":{"data":{"mock":{"mock":"@string( qwertyuiopasdfghjklzxcvbnm, 1, 10 )"},"type":"string"},"success":{"type":"boolean"}}},"example":"{\n\t\"data\": \"rafdy\",\n\t\"success\": true\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}},"get":{"summary":"查询所有","description":"查询所有告警等级。","tags":["告警中心/告警等级"],"parameters":[{"name":"X-API-KEY","in":"header","description":"认证密钥（覆盖全局配置）","required":true,"example":"","schema":{"type":"string"}},{"name":"X-ProjectID","in":"header","description":"项目标识（覆盖全局配置）","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"data":{"type":"array","items":{"type":"object","title":"Items","required":[],"properties":{"id":{"type":"string"},"value":{"type":"number"},"color":{"type":"string"},"label":{"type":"string"},"projectID":{"type":"string"}}}},"success":{"type":"boolean"}}},"example":"{\n\t\"data\": [\n\t\t{\n\t\t\t\"id\": \"co528345naqj3n50pvtg\",\n\t\t\t\"code\": \"Normal\",\n\t\t\t\"color\": \"#606266\",\n\t\t\t\"name\": \"一般\"\n\t\t},\n\t\t{\n\t\t\t\"id\": \"co528345naqj3n50pvug\",\n\t\t\t\"code\": \"Important\",\n\t\t\t\"color\": \"#FF873D\",\n\t\t\t\"name\": \"重要\"\n\t\t},\n\t\t{\n\t\t\t\"id\": \"co528345naqj3n50pvv0\",\n\t\t\t\"code\": \"Critical\",\n\t\t\t\"color\": \"#FF5454\",\n\t\t\t\"name\": \"严重\"\n\t\t}\n\t],\n\t\"success\": true\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/alert/open_api/v1/alert_type/{}":{"delete":{"summary":"删除","description":"","tags":["告警中心/告警类型"],"parameters":[{"name":"body","in":"query","description":"{value：}","required":false,"example":"","schema":{"type":"string"}},{"name":"X-ProjectID","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}},{"name":"X-API-KEY","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["data","success"],"properties":{"data":{"type":"string"},"success":{"type":"boolean"}}},"example":""}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/alert/open_api/v1/alert_record/ignored/:id":{"put":{"summary":"忽略","description":"","tags":["告警中心/告警记录"],"parameters":[{"name":"X-ProjectID","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}},{"name":"X-API-KEY","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"body":{"type":"string","example":"","description":"{value：}"}},"required":["body"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["data","success"],"properties":{"data":{"type":"string"},"success":{"type":"boolean"}}},"example":""}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/alert/open_api/v1/alert_record/handle/:id":{"put":{"summary":"确认","description":"","tags":["告警中心/告警记录"],"parameters":[{"name":"X-ProjectID","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}},{"name":"X-API-KEY","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"body":{"type":"string","example":"","description":"{value：}"}},"required":["body"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["data","success"],"properties":{"data":{"type":"string"},"success":{"type":"boolean"}}},"example":""}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/alert/open_api/v1/alert_record":{"get":{"summary":"查询","description":"","tags":["告警中心/告警记录"],"parameters":[{"name":"start","in":"query","description":"起始时间。ISO 8601格式: YYYY-MM-DDTHH:MM:SSZ。如2021-04-22T22:02:46+08:00。","required":true,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"结束时间。ISO 8601格式: YYYY-MM-DDTHH:MM:SSZ。如2021-04-22T22:02:46+08:00。","required":true,"example":"","schema":{"type":"string"}},{"name":"pageNum","in":"query","description":"页码，必填","required":true,"example":"","schema":{"type":"string"}},{"name":"pageSize","in":"query","description":"分页大小，必填","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["data","success"],"properties":{"data":{"type":"object","required":["records","total"],"properties":{"records":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"status":{"type":"string"},"createdAt":{"type":"string"},"recoveredAt":{"type":"string"},"handledAt":{"type":"string"},"handler":{"type":"string"},"orderCreated":{"type":"boolean"},"occurContent":{"type":"string"},"ruleID":{"type":"string"},"ruleName":{"type":"string"},"ruleContent":{"type":"string"},"alertTypeID":{"type":"string"},"alertTypeName":{"type":"string"},"notifyChannels":{"type":"array","items":[]},"alertLevelID":{"type":"string"},"alertLevelValue":{"type":"integer"},"alertLevelColor":{"type":"string"},"alertLevelLabel":{"type":"string"},"triggerID":{"type":"string"},"triggerType":{"type":"string"},"deviceTypeID":{"type":"string"},"deviceTypeName":{"type":"string"},"deviceID":{"type":"string"},"deviceName":{"type":"string"},"mode":{"type":"string"},"duration":{"type":"integer"},"inputValue":{"type":"string"},"pointID":{"type":"string"},"pointName":{"type":"string"},"compareMode":{"type":"string"},"compareValue":{"type":"string"},"deviceStatus":{"type":"string"},"cron":{"type":"string"},"projectID":{"type":"string"}}}},"total":{"type":"integer"}}},"success":{"type":"boolean"}}},"example":""}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/alert/open_api/v1/alert_record/activity":{"get":{"summary":"查询活动告警","description":"查询所有活动告警。\n\n注意：活动告警的数量可能会很多，本接口限制最多只返回1000条活动告警。\n\n## 告警基础字段\n\n以下字段是每条告警都包含的：\n\n* `id`：(string) 告警产生时，自动设置的全局唯一标识\n* `status`：(string) 告警状态\n* `createdAt`：(string) 告警产生时间，RFC3339 格式\n* `deviceID`：(string) 产生告警的设备标识\n* `ruleTemplateID`：(string) 告警规则标识\n* `title`：(string) 告警标题，根据告警规则中设置的告警标题模板创建\n* `content`：(string) 告警内容，根据告警规则中设置的告警内容模板创建\n* `orderCreated`：(boolean) 对应告警工单是否创建\n\n## 来自告警规则的告警字段\n\n以下字段来自告警规则，可用于描述更具体的告警触发原因：\n\n* `mode`：(string) 告警规则的触发方式，有以下五种：单点触发 `point`、设备离线触发 `offline`、表达式触发 `expression`、长时间不上传数据触发 `not_upload`、长时间数据不变化触发 `not_change`。\n* `duration`：(number) 告警触发的持续时长阈值\n* `pointID`：(string) 触发告警的点位标识，不适用于 `mode` 为 `offline` 的情况。\n* `inputValue`：(number) 触发告警的点位值，不适用于 `mode` 为 `offline` 的情况。\n* `compareMode`：(string) 比较模式，仅适用于 `mode` 为 `point` 的情况。有如下几种：`>`、`>=`、`<`、`<=`、`=`、`!=`，`between`（区间内）、`not_between`（区间外）、`diff`（偏差值）。\n* `compareValue`：(string) 比较值，仅适用于 `mode` 为 `point` 的情况。`compareMode` 为 `diff` 不适用，对于 `compareMode` 为 `between` 和 `not_between` 为区间格式，对于其他 `compareMode` 为浮点数格式。\n* `diff`：(number) 偏差值，仅适用于 `compareMode` 为 `diff` 的情况。\n* `deadBand`：(number) 解除告警的死区值，仅适用于 `mode` 为 `point` 的情况，且不能与 `duration` 同时设置。\n\n## 告警状态\n\n告警有四种状态，在响应中以 `status` 字段表示：\n\n1. `auto`：无需处理状态。如果告警规则中设置了「**无需确认**」时，所产生的告警都是 `auto` 状态。\n2. `unhandled`：未处理状态。如果告警规则中没有设置「**无需确认**」，则所产生的告警初始为 `unhandled` 状态。\n3. `handled`：已确认状态。`unhandled` 状态的告警，在工作台中点击确认之后，进入 `handled` 状态。\n4. `ignored`：已忽略状态。`unhandled` 状态的告警，在工作台中点击忽略之后，进入 `ignored` 状态。\n\n对于 `handled` 和 `ignored` 状态的告警，在工作台中点击确认或忽略的时间保存为 `handledAt` 字段（RFC3339格式）。\n\n## 告警的解除\n\n告警解除时，解除时间保存为 `recoveredAt` 字段（RFC3339格式）。\n\n告警的解除与告警状态无关，只有当对应的告警规则不再满足时，告警才会解除。\n\n## 活动告警的定义\n\n默认配置下，活动告警定义为未解除的告警。\n\n具体来说，对于 `auto`、`unhandled`、`handled` 状态，只要告警未解除（`recoveredAt` 为空），即为未解除的告警。<br/>\n`ignored` 状态的告警被排除在外，因为这种告警可以认为用户不关心它是否解除。\n\n如果后端服务配置了 `alert.activeMode` 为 `1`，则活动告警定义为未确认的告警。\n\n这种配置下，活动告警的定义与告警解除与否无关，重视用户对告警的处理，只有 `unhandled` 状态的告警包含在内。<br/>\n`ignored` 状态的告警被排除在外，因为这种告警无需处理；`handled` 和 `ignored` 状态的告警被排除在外，它们是用户处理之后的状态。\n\n## 查询参数\n\n* `start` 和 `end`：指定告警 `createdAt`的起始时间和截止时间（RFC3339格式），如果都未指定，则查询所有活动告警。但无论是否指定，接口返回的告警数量都限制在 1000 条。\n* `alertTypeID`：指定（告警规则中配置的）告警类型\n* `deviceID`：指定设备标识\n* `deviceGroupID`：指定设备分组（只包含指定分组直属的设备，指定分组的下级分组中的设备不包含在内）\n* `deviceTags`：指定设备标签\n* `mode`：参照前文活动告警的定义，如果不设置则按照后端配置查询活动告警。设置为 `unrecovered` 则固定查询未处理的告警；设置为 `unhandled` 则固定查询未解除的告警。\n\n## 设备标签查询\n\n首先，以标签名为 key、标签值为 value，构造一个符合 [RFC3986](https://www.rfc-editor.org/rfc/rfc3986) 标准的 query。<br/>\n标签值如果没有指定，表示只要求标签存在，标签的值不限。<br/>\n不同的标签之间是 AND 的关系；同一个标签如果指定多次，对应的标签值之间是 OR 的关系。\n\n然后将这个 query 整体作为 `deviceTags` 参数。\n\n注意，因为 `deviceTags` 是 HTTP GET 请求的参数，实际上很可能按照 RFC3986 标准还需要转义一次（`&` -> `%26`, `=` -> `%3D`，`%` -> `%25`）。\n\n例1. 设备必须有 `tag1` 标签（标签的值不限）：<br/>\n标签查询：`tag1` <br/>\n完整查询：`deviceTags=tag1`\n\n例2. 设备必须有 `tag1` 标签和 `tag2` 标签（标签的值不限）：<br/>\n标签查询：`tag1&tag2` <br/>\n完整查询：`deviceTags=tag1%26tag2`\n\n例3. 设备必须有 `tag1` 标签，且它的值是 `x` 或者 `y` ：<br/>\n标签查询：`tag1=x&tag1=y` <br/>\n完整查询：`deviceTags=tag1%3Dx%26tag1%3Dy`\n\n例4. 设备必须有 `tag1` 标签和 `tag2` 标签，且 `tag1` 的值是 `x` 或者 `y`，`tag2` 的值是 `好` ：<br/>\n标签查询：`tag1=x&tag1=y&tag2=%E5%A5%BD` <br/>\n完整查询：`deviceTags=tag1%3Dx%26tag1%3Dy%26tag2%3D%25E5%25A5%25BD` <br/>\n注意这里汉字本身就转义了一次，所以最后共转义了两次。\n\nJavaScript 代码示例:\n\n```javascript\nlet deviceTags = new URLSearchParams();\ndeviceTags.append('tag1', 'x');\ndeviceTags.append('tag1', 'y');\ndeviceTags.append('tag2', '好');\n\naxios.get(`${Host}/alert/open_api/v1/alert_record/activity`, {\n    headers: {\n        'X-ProjectID': `${ProjectID}`,\n        'X-API-KEY': `${ApiKey}`,\n    },\n    params: \n        'deviceTags': deviceTags.toString(),\n    },\n})\n```","tags":["告警中心/告警记录"],"parameters":[{"name":"start","in":"query","description":"（可选）告警起始时间","required":false,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"（可选）告警截止时间","required":false,"example":"","schema":{"type":"string"}},{"name":"alertTypeID","in":"query","description":"（可选）告警类型标识","required":false,"example":"","schema":{"type":"string"}},{"name":"deviceGroupID","in":"query","description":"（可选）设备分组标识","required":false,"example":"","schema":{"type":"string"}},{"name":"deviceID","in":"query","description":"（可选）设备标识","required":false,"example":"","schema":{"type":"string"}},{"name":"deviceTags","in":"query","description":"（可选）设备标签","required":false,"example":"","schema":{"type":"string"}},{"name":"X-ProjectID","in":"header","description":"项目标识（覆盖全局配置）","required":true,"example":"","schema":{"type":"string"}},{"name":"X-API-KEY","in":"header","description":"认证密钥（覆盖全局配置）","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string"},"msg":{"type":"string"}}},"example":"{\n\t\"code\": \"500\",\n\t\"msg\": \"Access denied for user 'root'@'192.168.0.189' (using password: YES)\"\n}"}}}}}},"/alert/open_api/v1/alert_record/ignoredBatch":{"put":{"summary":"批量忽略","description":"","tags":["告警中心/告警记录"],"parameters":[{"name":"X-ProjectID","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}},{"name":"X-API-KEY","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"body":{"type":"string","example":"","description":"示例：{  \"ids\": [    \"c7pmmr5e97ejcm3jg2cg\"  ]}，ids：id数组"}},"required":["body"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["data","success"],"properties":{"data":{"type":"array","items":{"type":"string"}},"success":{"type":"boolean"}}},"example":""}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/iot/open_api/v1/device/points":{"get":{"summary":"测点查询","description":"","tags":["设备互联/设备"],"parameters":[{"name":"deviceID","in":"query","description":"设备标识","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":[],"example":"{\n\t\"data\": [\n\t\t{\n\t\t\t\"pointID\": \"Alarm\",\n\t\t\t\"name\": \"报警\",\n\t\t\t\"type\": \"bool\",\n\t\t\t\"accessMode\": \"rw\",\n\t\t\t\"orderNumber\": 0\n\t\t},\n\t\t{\n\t\t\t\"pointID\": \"Current\",\n\t\t\t\"name\": \"焊接电流\",\n\t\t\t\"type\": \"double\",\n\t\t\t\"accessMode\": \"r\",\n\t\t\t\"orderNumber\": 0,\n\t\t\t\"generator\": \"RAMP(5000, 100, 110, 0.5)\"\n\t\t},\n\t\t{\n\t\t\t\"pointID\": \"Mode\",\n\t\t\t\"name\": \"工作模式\",\n\t\t\t\"type\": \"bool\",\n\t\t\t\"accessMode\": \"rw\",\n\t\t\t\"orderNumber\": 0,\n\t\t\t\"description\": \"1自动，0手动\"\n\t\t},\n\t\t{\n\t\t\t\"pointID\": \"Voltage\",\n\t\t\t\"name\": \"焊接电压\",\n\t\t\t\"type\": \"double\",\n\t\t\t\"accessMode\": \"r\",\n\t\t\t\"orderNumber\": 0,\n\t\t\t\"generator\": \"USER(10000, 18, 19, 20)\"\n\t\t},\n\t\t{\n\t\t\t\"pointID\": \"WireSpeed\",\n\t\t\t\"name\": \"送丝速度\",\n\t\t\t\"type\": \"double\",\n\t\t\t\"accessMode\": \"r\",\n\t\t\t\"orderNumber\": 0,\n\t\t\t\"generator\": \"RAMP(5000, 7, 8, 0.1)\"\n\t\t}\n\t],\n\t\"success\": true\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/iot/open_api/v1/device_type_point":{"get":{"summary":"测点查询","description":"","tags":["设备互联/设备模型"],"parameters":[{"name":"deviceTypeID","in":"query","description":"设备模型标识","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":[],"example":"{\n\t\"data\": [\n\t\t{\n\t\t\t\"pointID\": \"Alarm\",\n\t\t\t\"name\": \"报警\",\n\t\t\t\"type\": \"bool\",\n\t\t\t\"accessMode\": \"rw\",\n\t\t\t\"orderNumber\": 0\n\t\t},\n\t\t{\n\t\t\t\"pointID\": \"Current\",\n\t\t\t\"name\": \"焊接电流\",\n\t\t\t\"type\": \"double\",\n\t\t\t\"accessMode\": \"r\",\n\t\t\t\"orderNumber\": 0,\n\t\t\t\"generator\": \"RAMP(5000, 100, 110, 0.5)\"\n\t\t},\n\t\t{\n\t\t\t\"pointID\": \"Mode\",\n\t\t\t\"name\": \"工作模式\",\n\t\t\t\"type\": \"bool\",\n\t\t\t\"accessMode\": \"rw\",\n\t\t\t\"orderNumber\": 0,\n\t\t\t\"description\": \"1自动，0手动\"\n\t\t},\n\t\t{\n\t\t\t\"pointID\": \"Voltage\",\n\t\t\t\"name\": \"焊接电压\",\n\t\t\t\"type\": \"double\",\n\t\t\t\"accessMode\": \"r\",\n\t\t\t\"orderNumber\": 0,\n\t\t\t\"generator\": \"USER(10000, 18, 19, 20)\"\n\t\t},\n\t\t{\n\t\t\t\"pointID\": \"WireSpeed\",\n\t\t\t\"name\": \"送丝速度\",\n\t\t\t\"type\": \"double\",\n\t\t\t\"accessMode\": \"r\",\n\t\t\t\"orderNumber\": 0,\n\t\t\t\"generator\": \"RAMP(5000, 7, 8, 0.1)\"\n\t\t}\n\t],\n\t\"success\": true\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/iot/open_api/v1/device_group/all":{"get":{"summary":"查询所有设备分组","description":"","tags":["设备互联/设备分组"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","default":true,"description":"成功时为 true"},"data":{"type":"array","items":{"type":"object","title":"Items","required":["id","name"],"properties":{"id":{"type":"string","description":"标识"},"name":{"type":"string","description":"名称"},"code":{"type":"string","description":"编码"},"parent_id":{"type":"string","description":"父分组标识"},"description":{"type":"string","description":"描述"}},"description":"设备分组"},"description":"所有设备分组"}}},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": [\r\n\t\t{\r\n\t\t\t\"id\": \"A01-2\",\r\n\t\t\t\"name\": \"二号分组\",\r\n\t\t\t\"code\": \"A01-2\",\r\n\t\t\t\"parent_id\": \"A01\",\r\n\t\t\t\"description\": \"划积提写开如及边克百决风各成少反该\"\r\n\t\t}\r\n\t]\r\n}"}}}}}},"/iot/open_api/v1/device/:id/props":{"get":{"summary":"属性查询","description":"","tags":["设备互联/设备"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":[],"example":"{\r\n  \"data\": [\r\n    {\r\n      \"id\": \"123\",\r\n      \"name\": \"123\",\r\n      \"description\": \"123\",\r\n      \"type\": \"line\",\r\n      \"invisible\": true,\r\n      \"required\": false\r\n    }\r\n  ],\r\n  \"code\": \"\"\r\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/ems/open_api/v1/report/subentry/hourly":{"get":{"summary":"逐时能耗","description":"指定一级用能单元和一个能源类型，查询所有能源分项在指定时间范围内每小时的能耗。\n\n必填参数：\n\n* `sectorID` 或 `sectorCode`：一级用能单元\n* `energyTypeID`：能源类型标识\n* `start`：起始时间\n* `end`：截止时间\n\n`start` 和 `end` 必须是 ISO 8601 完整时间格式（对应 [strptime(3)](https://linux.die.net/man/3/strptime) 格式 `\"%Y-%m-%dT%H:%M:%S%z\"`)，转换到服务器时区后，除年、月、日、时之外的部分被忽略，取闭区间。\n\n兼容参数：\n* `time`：如果只传一个时间参数 `time`，则截取对应时间的年、月、日部分，取当日 0 时为 `start`，23 时为 `end`\n\n可选参数：\n\n* `subentryID` 或 `subentryCode`：指定分项\n* `round`：忽略时返回原始值，设为 0 取值，设为 2 保留两位小数\n\n返回数值始终为字符串形式（无数据为 `null`），例如原始值为 `\"975.6\"`，则 `round` 为 2 时返回 `\"975.60\"`。\n\n返回值中的时间为 [ECMA 扩展的 ISO 8601 格式](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-time-string-format) 精确到分，替换分隔符 `T` 为空格，且分钟部分始终为零（`\"YYYY-MM-DD HH:00\"`）。\n（JavaScript 兼容性提示：`Date` 构造函数只在一部分实现中支持[这种格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format)，并且有可能会使用 UTC 时区。）","tags":["能源管理/能耗报表/分项能耗"],"parameters":[{"name":"subentryID","in":"query","description":"（可选）指定分项","required":false,"example":"","schema":{"type":"string"}},{"name":"subentryCode","in":"query","description":"（可选）指定分项","required":false,"example":"","schema":{"type":"string"}},{"name":"sectorID","in":"query","description":"一级用能单元","required":true,"example":"","schema":{"type":"string"}},{"name":"sectorCode","in":"query","description":"一级用能单元","required":false,"example":"","schema":{"type":"string"}},{"name":"energyTypeID","in":"query","description":"能源类型标识","required":true,"example":"","schema":{"type":"string"}},{"name":"start","in":"query","description":"起始时间","required":true,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"截止时间","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"properties":{"success":{"default":true,"description":"成功时为 true","type":"boolean"},"data":{"description":"返回数据","items":{"properties":{"id":{"description":"分项标识","type":"string"},"name":{"description":"分项名称","type":"string"},"code":{"description":"分项编码","type":"string"},"perendID":{"description":"父级分项标识","type":"string"},"total":{"description":"指定时间段内的总能耗","type":"string"},"values":{"description":"逐时能耗","items":{"properties":{"time":{"description":"时间","type":"string"},"value":{"description":"此小时能耗","type":"string"}},"required":["time","value"],"title":"Items","type":"object"},"type":"array"}},"required":["id","name","total","values"],"title":"Items","type":"object"},"type":"array"}},"required":["success","data"],"type":"object"},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": [\r\n\t\t{\r\n\t\t\t\"id\": \"5b5d77d655544fef87e357fc04b47d19\",\r\n\t\t\t\"name\": \"煤油\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"parentID\": \"cpel6is5naqkdv21hmsg\",\r\n\t\t\t\"total\": \"93.24\",\r\n\t\t\t\"values\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-09 09:00\",\r\n\t\t\t\t\t\"value\": null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-09 10:00\",\r\n\t\t\t\t\t\"value\": \"93.24\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"cpel6is5naqkdv21hmsg\",\r\n\t\t\t\"name\": \"油\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"total\": \"725.31\",\r\n\t\t\t\"values\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-09 09:00\",\r\n\t\t\t\t\t\"value\": null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-09 10:00\",\r\n\t\t\t\t\t\"value\": \"725.31\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t]\r\n}"}}}}}},"/asset/open_api/v1/alert_work_order/review/accept":{"post":{"summary":"审核通过","description":"审核通过工单，原则上应当由工单中指定的审核人操作。\n\n操作成功后，工单状态变为 4（已完成）。","tags":["维护管理/告警工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/alert_work_order/review/reject":{"post":{"summary":"审核驳回","description":"驳回工单，原则上应当由工单中指定的审核人操作。\n\n操作成功后，工单状态变为 3（已驳回）。","tags":["维护管理/告警工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"},"remark":{"type":"string","description":"审核意见"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/alert_work_order/attachment/:id":{"get":{"summary":"下载附件","description":"下载附件。\n\n工单查询结果中包含 `attachmentExt` 时，此工单包含附件，可通过此地址下载。\n","tags":["维护管理/告警工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"type":"object","properties":{}},"example":""}}},"404":{"description":"失败","content":{"application/json":{"schema":{"type":"object","properties":{}},"example":""}}}}}},"/asset/open_api/v1/alert_work_order/attachment":{"post":{"summary":"上传附件","description":"上传附件。\n\n附件文件不能超过 10 MiB，文件名必须有扩展名。\n","tags":["维护管理/告警工单"],"parameters":[],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"","description":"工单ID，必填"},"file":{"type":"file","example":"","description":"附件，必填"}},"required":["id","file"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/locale_work_order/review/accept":{"post":{"summary":"审核通过","description":"审核通过工单，原则上应当由工单中指定的审核人操作。\n\n操作成功后，工单状态变为 4（已完成）。","tags":["维护管理/现场工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/locale_work_order/review/reject":{"post":{"summary":"审核驳回","description":"驳回工单，原则上应当由工单中指定的审核人操作。\n\n操作成功后，工单状态变为 3（已驳回）。","tags":["维护管理/现场工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"},"remark":{"type":"string","description":"审核意见"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/locale_work_order/attachment/:id":{"get":{"summary":"下载附件","description":"下载附件。\n\n工单查询结果中包含 `attachmentExt` 时，此工单包含附件，可通过此地址下载。\n","tags":["维护管理/现场工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"type":"object","properties":{}},"example":""}}},"404":{"description":"失败","content":{"application/json":{"schema":{"type":"object","properties":{}},"example":""}}}}}},"/asset/open_api/v1/locale_work_order/attachment":{"post":{"summary":"上传附件","description":"上传附件。\n\n附件文件不能超过 10 MiB，文件名必须有扩展名。\n","tags":["维护管理/现场工单"],"parameters":[],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"","description":"工单ID，必填"},"file":{"type":"file","example":"","description":"附件，必填"}},"required":["id","file"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/maintenance_work_order/review/accept":{"post":{"summary":"审核通过","description":"审核通过工单，原则上应当由工单中指定的审核人操作。\n\n操作成功后，工单状态变为 4（已完成）。","tags":["维护管理/维护工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/maintenance_work_order/review/reject":{"post":{"summary":"审核驳回","description":"驳回工单，原则上应当由工单中指定的审核人操作。\n\n操作成功后，工单状态变为 3（已驳回）。","tags":["维护管理/维护工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"},"remark":{"type":"string","description":"审核意见"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/maintenance_work_order/attachment/:id":{"get":{"summary":"下载附件","description":"下载附件。\n\n工单查询结果中包含 `attachmentExt` 时，此工单包含附件，可通过此地址下载。\n","tags":["维护管理/维护工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"type":"object","properties":{}},"example":""}}},"404":{"description":"失败","content":{"application/json":{"schema":{"type":"object","properties":{}},"example":""}}}}}},"/asset/open_api/v1/maintenance_work_order/attachment":{"post":{"summary":"上传附件","description":"上传附件。\n\n附件文件不能超过 10 MiB，文件名必须有扩展名。\n","tags":["维护管理/维护工单"],"parameters":[],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"","description":"工单ID，必填"},"file":{"type":"file","example":"","description":"附件，必填"}},"required":["id","file"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/schedule_work_order/review/accept":{"post":{"summary":"审核通过","description":"审核通过工单，原则上应当由工单中指定的审核人操作。\n\n操作成功后，工单状态变为 4（已完成）。","tags":["维护管理/计划工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/schedule_work_order/review/reject":{"post":{"summary":"审核驳回","description":"驳回工单，原则上应当由工单中指定的审核人操作。\n\n操作成功后，工单状态变为 3（已驳回）。","tags":["维护管理/计划工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"},"remark":{"type":"string","description":"审核意见"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/schedule_work_order/attachment/:id":{"get":{"summary":"下载附件","description":"下载附件。\n\n工单查询结果中包含 `attachmentExt` 时，此工单包含附件，可通过此地址下载。\n","tags":["维护管理/计划工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"type":"object","properties":{}},"example":""}}},"404":{"description":"失败","content":{"application/json":{"schema":{"type":"object","properties":{}},"example":""}}}}}},"/asset/open_api/v1/schedule_work_order/attachment":{"post":{"summary":"上传附件","description":"上传附件。\n\n附件文件不能超过 10 MiB，文件名必须有扩展名。\n","tags":["维护管理/计划工单"],"parameters":[],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"","description":"工单ID，必填"},"file":{"type":"file","example":"","description":"附件，必填"}},"required":["id","file"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/apm/open_api/v1/performance/effi/last":{"get":{"summary":"查询指标当前值","description":"查询设备指标当前值(V5.7.8)。\n- 当 name 参数不为空时，只查询该指标的当前值。\n- 当 name 参数为空时，查询该设备下的所有指标的当前值。\n\n","tags":["维护管理/设备绩效"],"parameters":[{"name":"deviceID","in":"query","description":"设备标识","required":false,"example":"","schema":{"type":"string"}},{"name":"name","in":"query","description":"指标变量名，可以为空","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功（分页）","content":{"application/json":{"schema":{"properties":{},"required":[],"type":"object"},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"properties":{"code":{"description":"错误码","type":"string"},"msg":{"description":"错误描述","type":"string"}},"required":["code"],"type":"object"},"example":""}}}}}},"/iot/open_api/v1/misc/device_count/type":{"get":{"summary":"设备数量（模型视角）","description":"查询当前项目下，各设备模型下的设备总数。\n\n以下字段可用于筛选设备：\n\n* `state`：指定设备状态（0=离线，1=在线），不过滤设备状态时必须去除此选项\n* `typeID`：指定设备模型标识\n* `tags`：指定设备标签（详见[【设备数量（全局）】](?target_id=32be146d763000)接口）\n* `emptyGroup`：如果为`true`或`1`，则只查询未分组设备\n* `groupID`：指定设备分组标识（`emptyGroup`为`true`或`1`时忽略此选项）\n* `restrictGroup`：如果为`true`或`1`，则`groupID`为严格匹配，不包含下级分组（默认包含下级）\n* `search`：指定设备标识或名称（模糊查询）\n\n以上查询条件用法与[【设备数量（全局）】](?target_id=32be146d763000)接口相同。\n\n除以上查询条件之外，此接口还有以下参数：\n\n* `omitEmpty`：如果为`true`或`1`，则只返回设备数不为0的那些模型（默认返回所有设备模型）\n\n返回的设备模型按照查询到的设备数从高到低排序。\n\n注意：如果指定了 `typeID`，则返回数据最多只有一条。\n","tags":["设备互联/设备"],"parameters":[{"name":"state","in":"query","description":"（可选）设备状态（0=离线，1=在线）","required":false,"example":"","schema":{"type":"string"}},{"name":"typeID","in":"query","description":"（可选）设备模型","required":false,"example":"","schema":{"type":"string"}},{"name":"tags","in":"query","description":"（可选）设备标签","required":false,"example":"","schema":{"type":"string"}},{"name":"emptyGroup","in":"query","description":"（可选）只查询未分组设备","required":false,"example":"","schema":{"type":"boolean"}},{"name":"groupID","in":"query","description":"（可选）指定设备分组（emptyGroup为true时忽略此选项）","required":false,"example":"","schema":{"type":"string"}},{"name":"restrictGroup","in":"query","description":"（可选）指定 groupID 为严格匹配，不包含下级（默认包含下级）","required":false,"example":"","schema":{"type":"boolean"}},{"name":"search","in":"query","description":"（可选）设备标识或名称（模糊查询）","required":false,"example":"","schema":{"type":"string"}},{"name":"omitEmpty","in":"query","description":"（可选）只返回设备数不为0的模型","required":false,"example":"","schema":{"type":"boolean"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误信息"}}},"example":"{\r\n    \"code\": \"err_not_found\"\r\n}"}}}}}},"/iot/open_api/v1/misc/device_count/group":{"get":{"summary":"设备数量（分组视角） ","description":"查询当前项目下，各设备分组下的设备总数。\n\n以下字段可用于筛选设备：\n\n* `state`：指定设备状态（0=离线，1=在线），不过滤设备状态时必须去除此选项\n* `typeID`：指定设备模型标识\n* `tags`：指定设备标签（详见[【设备数量（全局）】](?target_id=32be146d763000)接口）\n* `emptyGroup`：如果为`true`或`1`，则只查询未分组设备\n* `groupID`：指定设备分组标识（`emptyGroup`为`true`或`1`时忽略此选项）\n* `restrictGroup`：如果为`true`或`1`，则`groupID`为严格匹配，不包含下级分组（默认包含下级）\n* `search`：指定设备标识或名称（模糊查询）\n\n以上查询条件用法与[【设备数量（全局）】](?target_id=32be146d763000)接口相同。\n\n除以上查询条件之外，此接口还有以下参数：\n\n* `omitEmpty`：如果为`true`或`1`，则只返回设备数不为0的那些分组（默认返回所有设备分组）\n\n返回的设备分组按照查询到的设备数从高到低排序。\n\n注意：\n\n* 未指定 `omitEmpty` 时，默认返回当前项目下所有存在的设备分组，未分组的设备不统计。此时不能指定参数 `emptyGroup`，否则将导致返回为空。\n* 指定 `omitEmpty` 时，返回设备数不为0的那些分组，此时返回中可能包含一条`id`和`name`都为空的数据，表示未分组。\n\n\n\n","tags":["设备互联/设备"],"parameters":[{"name":"state","in":"query","description":"（可选）设备状态（0=离线，1=在线）","required":false,"example":"","schema":{"type":"string"}},{"name":"typeID","in":"query","description":"（可选）设备模型","required":false,"example":"","schema":{"type":"string"}},{"name":"tags","in":"query","description":"（可选）设备标签","required":false,"example":"","schema":{"type":"string"}},{"name":"emptyGroup","in":"query","description":"（可选）只查询未分组设备","required":false,"example":"","schema":{"type":"boolean"}},{"name":"groupID","in":"query","description":"（可选）指定设备分组（emptyGroup为true时忽略此选项）","required":false,"example":"","schema":{"type":"string"}},{"name":"restrictGroup","in":"query","description":"（可选）指定 groupID 为严格匹配，不包含下级（默认包含下级）","required":false,"example":"","schema":{"type":"boolean"}},{"name":"search","in":"query","description":"（可选）设备标识或名称（模糊查询）","required":false,"example":"","schema":{"type":"string"}},{"name":"omitEmpty","in":"query","description":"（可选）只返回设备数不为0的分组","required":false,"example":"","schema":{"type":"boolean"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误信息"}}},"example":"{\r\n    \"code\": \"err_not_found\"\r\n}"}}}}}},"/ems/open_api/v1/report/meters/hourly":{"get":{"summary":"逐时能耗","description":"查询指定时间范围内每小时的仪表能耗。\n\n必填参数：\n\n* `start`：起始时间\n* `end`：截止时间\n\n`start` 和 `end` 必须是 ISO 8601 完整时间格式（对应 [strptime(3)](https://linux.die.net/man/3/strptime) 格式 `\"%Y-%m-%dT%H:%M:%S%z\"`)，转换到服务器时区后，除年、月、日、时之外的部分被忽略，取闭区间。\n\n兼容参数：\n* `time`：如果只传一个时间参数 `time`，则截取对应时间的年、月、日部分，取当日 0 时为 `start`，23 时为 `end`\n\n可选参数：\n\n* `meterID` 或 `meterCode`：仪表标识，如果指定将导致返回值最多只有一条数据\n* `energyTypeID`：能源类型标识\n* `pageSize`：指定分页大小，不指定则返回所有仪表\n* `pageNum`：指定了 `pageSize` 时，用于指定页码，默认为 1；未指定 `pageSize` 时无效\n* `round`：忽略时返回原始值，设为 0 取值，设为 2 保留两位小数\n* `tags`：仪表标签，用法与[【设备数量（全局）】](?target_id=32be146d763000)接口类似\n\n返回数值始终为字符串形式（无数据为 `null`），例如原始值为 `\"975.6\"`，则 `round` 为 2 时返回 `\"975.60\"`。\n\n返回值中的时间为 [ECMA 扩展的 ISO 8601 格式](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-time-string-format) 精确到分，替换分隔符 `T` 为空格，且分钟部分始终为零（`\"YYYY-MM-DD HH:00\"`）。\n（JavaScript 兼容性提示：`Date` 构造函数只在一部分实现中支持[这种格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format)，并且有可能会使用 UTC 时区。）","tags":["能源管理/能耗报表/仪表能耗"],"parameters":[{"name":"meterID","in":"query","description":"（可选）仪表标识","required":false,"example":"","schema":{"type":"string"}},{"name":"meterCode","in":"query","description":"（可选）仪表编码","required":false,"example":"","schema":{"type":"string"}},{"name":"energyTypeID","in":"query","description":"（可选）能源类型标识","required":false,"example":"","schema":{"type":"string"}},{"name":"pageSize","in":"query","description":"（可选）分页大小","required":false,"example":"","schema":{"type":"integer"}},{"name":"pageNum","in":"query","description":"（可选）分页页码","required":false,"example":"","schema":{"type":"integer"}},{"name":"tags","in":"query","description":"（可选）仪表标签","required":false,"example":"","schema":{"type":"string"}},{"name":"start","in":"query","description":"起始时间","required":true,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"截止时间","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"properties":{"success":{"default":true,"description":"成功时为 true","type":"boolean"},"data":{"description":"返回数据","properties":{"total":{"description":"仪表总数","type":"integer"},"items":{"description":"仪表","items":{"properties":{"id":{"description":"仪表标识","type":"string"},"name":{"description":"仪表名称","type":"string"},"code":{"description":"仪表编号","type":"string"},"total":{"description":"指定时间段内的总能耗","type":"string"},"values":{"description":"逐时能耗","items":{"properties":{"time":{"description":"时间","type":"string"},"value":{"description":"此小时能耗","type":["string","null"]}},"required":["time","value"],"title":"Items","type":"object"},"type":"array"}},"required":["id"],"title":"Items","type":"object"},"type":"array"}},"required":["name","total","values","tota","items"],"type":"object"}},"required":["success","data"],"type":"object"},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": {\r\n\t\t\"total\": 1,\r\n\t\t\"items\": [\r\n\t\t\t{\r\n\t\t\t\t\"id\": \"cpemotk5naqkfr19scbg\",\r\n\t\t\t\t\"name\": \"装一车间电表\",\r\n\t\t\t\t\"code\": \"deivce_power_6\",\r\n\t\t\t\t\"total\": \"96.99\",\r\n\t\t\t\t\"values\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"time\": \"2024-09-09 09:00\",\r\n\t\t\t\t\t\t\"value\": null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"time\": \"2024-09-09 10:00\",\r\n\t\t\t\t\t\t\"value\": \"96.99\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}"}}}}}},"/iot/open_api/v1/device_type/query":{"get":{"summary":"查询设备模型","description":"","tags":["设备互联/设备模型"],"parameters":[{"name":"pageNum","in":"query","description":"当前页序列，第一页为 1","required":false,"example":"","schema":{"type":"integer"}},{"name":"pageSize","in":"query","description":"每页显示的数量，默认为 10","required":true,"example":"","schema":{"type":"integer"}},{"name":"pageSize","in":"query","description":"每页显示的数量，默认为 10","required":false,"example":"","schema":{"type":"integer"}},{"name":"","in":"query","description":"","required":true,"example":"","schema":{"type":"string"}},{"name":"search","in":"query","description":"按名称或标识进行搜索","required":false,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":[],"example":""}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/iot/open_api/v1/device_type/:id/props":{"get":{"summary":"属性查询","description":"","tags":["设备互联/设备模型"],"parameters":[{"name":"","in":"query","description":"设备类型ID","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":[],"example":"{\r\n  \"data\": [\r\n    {\r\n      \"id\": \"123\",\r\n      \"name\": \"123\",\r\n      \"description\": \"123\",\r\n      \"type\": \"line\",\r\n      \"invisible\": true,\r\n      \"required\": false\r\n    }\r\n  ],\r\n  \"code\": \"\"\r\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/alert/open_api/v1/alert_type":{"put":{"summary":"修改","description":"","tags":["告警中心/告警类型"],"parameters":[{"name":"X-ProjectID","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}},{"name":"X-API-KEY","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"body":{"type":"string","example":"","description":"示例：{  \"id\": \"c8o55fte97etfjrc77lg\",  \"name\": \"告警类型修改\",  \"alertLevelID\": \"c8g7ga5e97ek16h6l1qg\",  \"notifyChannels\": [ \"sms\"], \"occurContent\": \"\",  \"recoverContent\": \"\"}"}},"required":["body"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":[],"properties":{"data":{"type":"string"},"success":{"type":"boolean"}}},"example":"{\n\t\"data\": \"全过开做查八马厂军加于众联战备难时\",\n\t\"success\": false\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}},"get":{"summary":"分页查询","description":"分页查询告警类型。","tags":["告警中心/告警类型"],"parameters":[{"name":"name","in":"query","description":"类型名称，可选","required":false,"example":"","schema":{"type":"string"}},{"name":"level","in":"query","description":"告警等级value，可选","required":false,"example":"","schema":{"type":"string"}},{"name":"pageNum","in":"query","description":"页码，必填","required":true,"example":"","schema":{"type":"string"}},{"name":"pageSize","in":"query","description":"分页大小，必填","required":true,"example":"","schema":{"type":"string"}},{"name":"X-API-KEY","in":"header","description":"认证密钥（覆盖全局配置）","required":true,"example":"","schema":{"type":"string"}},{"name":"X-ProjectID","in":"header","description":"项目标识（覆盖全局配置）","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{},"required":[]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["data","success"],"properties":{"data":{"type":"object","required":["total","types"],"properties":{"total":{"type":"integer"},"types":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"},"name":{"type":"string"},"alertLevelID":{"type":"string"},"notifyChannels":{"type":"array","items":{"type":"string"}},"occurContent":{"type":"string"},"recoverContent":{"type":"string"},"projectID":{"type":"string"},"alertLevel":{"type":"object","required":["id","value","color","label","projectID"],"properties":{"id":{"type":"string"},"color":{"type":"string"},"label":{"type":"string"},"value":{"type":"integer"},"projectID":{"type":"string"}},"APIPOST_ORDERS":["id","value","color","label","projectID"]}}}}}},"success":{"type":"boolean"}}},"example":"{\n\t\"data\": {\n\t\t\"total\": 2,\n\t\t\"types\": [\n\t\t\t{\n\t\t\t\t\"id\": \"cocacgc5naqhet32292g\",\n\t\t\t\t\"name\": \"设备离线\",\n\t\t\t\t\"code\": \"device_offline\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"id\": \"coce5os5naqk6l2cn860\",\n\t\t\t\t\"name\": \"tag类型\",\n\t\t\t\t\"code\": \"tag_type\"\n\t\t\t}\n\t\t]\n\t},\n\t\"success\": true\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}},"post":{"summary":"新增","description":"","tags":["告警中心/告警类型"],"parameters":[{"name":"X-ProjectID","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}},{"name":"X-API-KEY","in":"header","description":"","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"body":{"type":"string","example":"","description":"示例：{  \"name\": \"告警类型\",  \"alertLevelID\": \"c8g7ga5e97ek16h6l1qg\",  \"notifyChannels\": [\"sms\"], \"occurContent\": \"\",  \"recoverContent\": \"\"}"}},"required":["body"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["data","success"],"properties":{"data":{"type":"string"},"success":{"type":"boolean"}}},"example":""}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}},"/iot/open_api/v1/device/:id/one":{"get":{"summary":"单设备查询","description":"","tags":["设备互联/设备"],"parameters":[{"name":"","in":"query","description":"","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":"{\n\t\"code\": \"not_found\",\n\t\"msg\": \"device not found\"\n}"}}}}}},"/alert/open_api/v1/misc/platform/alerts":{"get":{"summary":"告警记录","description":"查询横跨所有租户和项目的活动告警。\n如果指定了 `tenantID` 则只查询指定租户下的告警。\n\n查询参数 `pageSize` 和 `pageNum` 用于分页。\n\n返回的告警信息按照 `createdAt` 从新到旧排序。","tags":["租户看板"],"parameters":[{"name":"tenantID","in":"query","description":"租户 ID，未指定则查询所有项目","required":false,"example":"","schema":{"type":"string"}},{"name":"start","in":"query","description":"起始时间，RFC3339 格式","required":false,"example":"","schema":{"type":"date"}},{"name":"end","in":"query","description":"截止时间，RFC3339 格式","required":false,"example":"","schema":{"type":"date"}},{"name":"pageSize","in":"query","description":"分页大小，默认 10","required":false,"example":"","schema":{"type":"integer"}},{"name":"pageNum","in":"query","description":"当前分页，默认 1","required":false,"example":"","schema":{"type":"integer"}},{"name":"X-API-KEY","in":"header","description":"认证密钥","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","default":true,"description":"成功时为 true","apipiost_allow_null":false},"data":{"type":"object","required":["total"],"properties":{"total":{"type":"integer","description":"活动告警总数"},"items":{"type":"array","items":{"type":"object","title":"Items","required":["id","status","createdAt","title","content","projectID","diviceID"],"properties":{"id":{"type":"string"},"status":{"enum":["unhandled","handled","ignored","auto"],"type":"string","description":"告警状态","apipost_enable_enum":true},"createdAt":{"type":"string","format":"date-time","description":"告警时间"},"recoveredAt":{"type":"string","format":"date-time","apipiost_allow_null":false},"handledAt":{"type":"string","format":"date-time","apipiost_allow_null":false},"expiredAt":{"type":"string","format":"date-time","apipiost_allow_null":false},"title":{"type":"string","description":"告警标题"},"content":{"type":"string","description":"告警描述"},"projectID":{"type":"string","description":"所属项目 ID"},"diviceID":{"type":"string","description":"告警设备 ID"},"deviceName":{"type":"string","description":"设备名称"},"alertTypeName":{"type":"string","description":"告警类型名称"},"alertLevelName":{"type":"string","description":"告警等级名称"},"alertLevelCode":{"type":"string","description":"告警等级编码"},"alertLevelColor":{"type":"string","description":"告警等级颜色"}},"description":"一条告警"},"description":"当前分页下的告警","apipiost_allow_null":true}},"description":"返回数据"}}},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": {\r\n\t\t\"total\": 1,\r\n\t\t\"items\": [\r\n\t\t\t{\r\n\t\t\t\t\"id\": \"cp5cvgc5naqk2b5vs25g\",\r\n\t\t\t\t\"status\": \"unhandled\",\r\n\t\t\t\t\"createdAt\": \"2024-05-20T12:21:20.274425+08:00\",\r\n\t\t\t\t\"recoveredAt\": null,\r\n\t\t\t\t\"handledAt\": null,\r\n\t\t\t\t\"expiredAt\": null,\r\n\t\t\t\t\"title\": \"长时间不变化\",\r\n\t\t\t\t\"content\": \"点位数据长时间不变化\",\r\n\t\t\t\t\"projectID\": \"iotopo\",\r\n\t\t\t\t\"diviceID\": \"DEV001\",\r\n\t\t\t\t\"deviceName\": \"设备001\",\r\n\t\t\t\t\"alertTypeName\": \"设备告警\",\r\n\t\t\t\t\"alertLevelName\": \"普通\",\r\n\t\t\t\t\"alertLevelCode\": \"normal\",\r\n\t\t\t\t\"alertLevelColor\": \"#2200FF\"\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}"}}}}}},"/open_api/v1/global_var/get_value":{"get":{"summary":"读取变量值","description":"","tags":["数据接口/全局变量"],"parameters":[{"name":"namespace","in":"query","description":"命名空间名称\n","required":true,"example":"","schema":{"type":"string"}},{"name":"name","in":"query","description":"变量名称","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{}},"example":"{\r\n    \"data\": {\r\n        \"namespace\": \"default\",\r\n        \"name\": \"v4\",\r\n        \"value\": 1,\r\n        \"type\": \"number\",\r\n        \"time\": \"2025-01-15T11:14:51.8119939+08:00\"\r\n    },\r\n    \"success\": true\r\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":{"type":"object","properties":{}},"example":""}}}}}},"/open_api/v1/global_var/update_value":{"post":{"summary":"更新变量值","description":"","tags":["数据接口/全局变量"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"namespace":{"mock":{"mock":"default"},"type":"string","description":"命名空间"},"name":{"mock":{"mock":"v4"},"type":"string","description":"变量名称"},"value":{"mock":{"mock":"2"},"type":"string","description":"变量值"}}},"example":"{\r\n\t\"namespace\": \"default\",\r\n\t\"name\": \"v1\",\r\n\t\"value\": \"20\"\r\n}"}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{}},"example":"{\n\t\"success\": true\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":{"type":"object","properties":{}},"example":""}}}}}},"/iot/open_api/v1/device_group/one":{"get":{"summary":"查询单个设备分组","description":"查询单个设备分组。\n\n可从 `id`、`code`、`name` 中选择一个作为查询条件，与设备分组严格匹配。\n查询条件至少需要一个。\n查询条件存在多个时，只有一个生效，按 `id`＞`code`＞`name` 的顺序生效。\n\n查找不到分组时，响应体没有 `success` 字段。响应体的 `code` 字段值为 `err_not_found`。\n查找到多个分组时，只返回其中一个分组。","tags":["设备互联/设备分组"],"parameters":[{"name":"id","in":"query","description":"按标识查询","required":true,"example":"","schema":{"type":"string"}},{"name":"code","in":"query","description":"按编码查询","required":true,"example":"","schema":{"type":"string"}},{"name":"name","in":"query","description":"按名称查询","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"未找到为 err_not_found"}}},"example":"{\r\n\t\"code\": \"err_not_found\"\r\n}"}}}}}},"/ems/open_api/v1/report/meter/monthly":{"get":{"summary":"逐月能耗","description":"指定一个仪表，查询指定时间范围内每个月的能耗。\n\n必填参数：\n\n* `meterID` 或 `meterCode`：仪表标识或编码\n* `start`：起始月份\n* `end`：截止月份\n\n`start` 和 `end` 必须是 ISO 8601 完整时间格式（对应 [strptime(3)](https://linux.die.net/man/3/strptime) 格式 `\"%Y-%m-%dT%H:%M:%S%z\"`)，转换到服务器时区后，除年、月之外的部分被忽略，取闭区间。\n\n兼容参数：\n* `time`：如果只传一个时间参数 `time`，则截取对应时间的年份，取当年 1 月 `start`，12 月为 `end`\n\n可选参数：\n\n* `round`：忽略时返回原始值，设为 0 取值，设为 2 保留两位小数\n\n返回数值始终为字符串形式（无数据为 `null`），例如原始值为 `\"975.6\"`，则 `round` 为 2 时返回 `\"975.60\"`。\n\n返回值中的时间为 [ECMA 扩展的 ISO 8601 格式](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-time-string-format) 精确到月份（`\"YYYY-MM\"`）。\n（JavaScript 兼容性提示：`Date` 构造函数只在一部分实现中支持[这种格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format)，并且有可能会使用 UTC 时区。）","tags":["能源管理/能耗报表/单仪表能耗"],"parameters":[{"name":"meterID","in":"query","description":"仪表标识","required":true,"example":"","schema":{"type":"string"}},{"name":"meterCode","in":"query","description":"仪表编码","required":false,"example":"","schema":{"type":"string"}},{"name":"start","in":"query","description":"起始月份","required":true,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"截止月份","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"失败","content":{"application/json":{"schema":{"properties":{"code":{"description":"错误码","type":"string"}},"required":["code"],"type":"object"},"example":"{\r\n\t\"code\": \"err_not_found\"\r\n}"}}}}}},"/ems/open_api/v1/report/meter/daily":{"get":{"summary":"逐日能耗","description":"指定一个仪表，查询指定时间范围内每天的能耗。\n\n必填参数：\n\n* `meterID` 或 `meterCode`：仪表标识或编码\n* `start`：起始日期\n* `end`：截止日期\n\n`start` 和 `end` 必须是 ISO 8601 完整时间格式（对应 [strptime(3)](https://linux.die.net/man/3/strptime) 格式 `\"%Y-%m-%dT%H:%M:%S%z\"`)，转换到服务器时区后，除年、月、日之外的部分被忽略，取闭区间。\n\n兼容参数：\n* `time`：如果只传一个时间参数 `time`，则截取对应时间的年、月部分，取当月 1 日 `start`，最后一天为 `end`\n\n可选参数：\n\n* `round`：忽略时返回原始值，设为 0 取值，设为 2 保留两位小数\n\n返回数值始终为字符串形式（无数据为 `null`），例如原始值为 `\"975.6\"`，则 `round` 为 2 时返回 `\"975.60\"`。\n\n返回值中的时间为 [ECMA 扩展的 ISO 8601 格式](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-time-string-format) 精确到日（`\"YYYY-MM-DD\"`）。\n（JavaScript 兼容性提示：`Date` 构造函数只在一部分实现中支持[这种格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format)，并且有可能会使用 UTC 时区。）","tags":["能源管理/能耗报表/单仪表能耗"],"parameters":[{"name":"meterID","in":"query","description":"仪表标识","required":true,"example":"","schema":{"type":"string"}},{"name":"meterCode","in":"query","description":"仪表编码","required":false,"example":"","schema":{"type":"string"}},{"name":"start","in":"query","description":"起始日期","required":true,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"截止日期","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"失败","content":{"application/json":{"schema":{"properties":{"code":{"description":"错误码","type":"string"}},"required":["code"],"type":"object"},"example":"{\r\n\t\"code\": \"err_not_found\"\r\n}"}}}}}},"/ems/open_api/v1/report/meter/hourly":{"get":{"summary":"逐时能耗","description":"指定一个仪表，查询指定时间范围内每小时的能耗。\n\n必填参数：\n\n* `meterID` 或 `meterCode`：仪表标识或编码\n* `start`：起始时间\n* `end`：截止时间\n\n`start` 和 `end` 必须是 ISO 8601 完整时间格式（对应 [strptime(3)](https://linux.die.net/man/3/strptime) 格式 `\"%Y-%m-%dT%H:%M:%S%z\"`)，转换到服务器时区后，除年、月、日、时之外的部分被忽略，取闭区间。\n\n兼容参数：\n* `time`：如果只传一个时间参数 `time`，则截取对应时间的年、月、日部分，取当日 0 时为 `start`，23 时为 `end`\n\n可选参数：\n\n* `round`：忽略时返回原始值，设为 0 取值，设为 2 保留两位小数\n\n返回数值始终为字符串形式（无数据为 `null`），例如原始值为 `\"975.6\"`，则 `round` 为 2 时返回 `\"975.60\"`。\n\n返回值中的时间为 [ECMA 扩展的 ISO 8601 格式](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-time-string-format) 精确到分，替换分隔符 `T` 为空格，且分钟部分始终为零（`\"YYYY-MM-DD HH:00\"`）。\n（JavaScript 兼容性提示：`Date` 构造函数只在一部分实现中支持[这种格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format)，并且有可能会使用 UTC 时区。）","tags":["能源管理/能耗报表/单仪表能耗"],"parameters":[{"name":"meterID","in":"query","description":"仪表标识","required":true,"example":"","schema":{"type":"string"}},{"name":"meterCode","in":"query","description":"仪表编码","required":false,"example":"","schema":{"type":"string"}},{"name":"start","in":"query","description":"起始时间","required":true,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"截止时间","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"失败","content":{"application/json":{"schema":{"properties":{"code":{"description":"错误码","type":"string"}},"required":["code"],"type":"object"},"example":"{\r\n\t\"code\": \"err_not_found\"\r\n}"}}}}}},"/ems/open_api/v1/report/sector/monthly":{"get":{"summary":"逐月能耗","description":"指定一个能源类型，查询所有用能单元在指定时间范围内每个月的能耗。\n\n必填参数：\n\n* `energyTypeID`：能源类型标识\n* `start`：起始月份\n* `end`：截止月份\n\n`start` 和 `end` 必须是 ISO 8601 完整时间格式（对应 [strptime(3)](https://linux.die.net/man/3/strptime) 格式 `\"%Y-%m-%dT%H:%M:%S%z\"`)，转换到服务器时区后，除年、月之外的部分被忽略，取闭区间。\n\n兼容参数：\n* `time`：如果只传一个时间参数 `time`，则截取对应时间的年份，取当年 1 月 `start`，12 月为 `end`\n\n可选参数：\n\n* `sectorID` 或 `sectorCode`：指定用能单元\n* `round`：忽略时返回原始值，设为 0 取值，设为 2 保留两位小数\n\n返回数值始终为字符串形式（无数据为 `null`），例如原始值为 `\"975.6\"`，则 `round` 为 2 时返回 `\"975.60\"`。\n\n返回值中的时间为 [ECMA 扩展的 ISO 8601 格式](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-time-string-format) 精确到月份（`\"YYYY-MM\"`）。\n（JavaScript 兼容性提示：`Date` 构造函数只在一部分实现中支持[这种格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format)，并且有可能会使用 UTC 时区。）","tags":["能源管理/能耗报表/用能单元能耗"],"parameters":[{"name":"sectorID","in":"query","description":"（可选）指定用能单元","required":false,"example":"","schema":{"type":"string"}},{"name":"sectorCode","in":"query","description":"（可选）指定用能单元","required":false,"example":"","schema":{"type":"string"}},{"name":"energyTypeID","in":"query","description":"能源类型标识","required":true,"example":"","schema":{"type":"string"}},{"name":"start","in":"query","description":"起始月份","required":true,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"截止月份","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"properties":{"success":{"default":true,"description":"成功时为 true","type":"boolean"},"data":{"description":"返回数据","items":{"properties":{"id":{"description":"用能单元标识","type":"string"},"name":{"description":"用能单元名称","type":"string"},"code":{"description":"用能单元编码","type":"string"},"perendID":{"description":"父级用能单元标识","type":"string"},"total":{"description":"指定时间段内的总能耗","type":"string"},"values":{"description":"逐月能耗","items":{"properties":{"time":{"description":"月份","type":"string"},"value":{"description":"此月能耗","type":"string"}},"required":["time","value"],"title":"Items","type":"object"},"type":"array"}},"required":["id","name","total","values"],"title":"Items","type":"object"},"type":"array"}},"required":["success","data"],"type":"object"},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": [\r\n\t\t{\r\n\t\t\t\"id\": \"5b5d77d655544fef87e357fc04b47d19\",\r\n\t\t\t\"name\": \"装三区\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"parentID\": \"cpel6is5naqkdv21hmsg\",\r\n\t\t\t\"total\": \"44971.08\",\r\n\t\t\t\"values\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-07\",\r\n\t\t\t\t\t\"value\": \"13791.96\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-08\",\r\n\t\t\t\t\t\"value\": \"16916.76\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09\",\r\n\t\t\t\t\t\"value\": \"14262.36\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"cpel6is5naqkdv21hmsg\",\r\n\t\t\t\"name\": \"厂区\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"total\": \"349457.08\",\r\n\t\t\t\"values\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-07\",\r\n\t\t\t\t\t\"value\": \"107190.1\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-08\",\r\n\t\t\t\t\t\"value\": \"131473.41\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09\",\r\n\t\t\t\t\t\"value\": \"110793.57\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t]\r\n}"}}}}}},"/ems/open_api/v1/report/sector/daily":{"get":{"summary":"逐日能耗","description":"指定一个能源类型，查询所有用能单元在指定时间范围内每天的能耗。\n\n必填参数：\n\n* `energyTypeID`：能源类型标识\n* `start`：起始日期\n* `end`：截止日期\n\n`start` 和 `end` 必须是 ISO 8601 完整时间格式（对应 [strptime(3)](https://linux.die.net/man/3/strptime) 格式 `\"%Y-%m-%dT%H:%M:%S%z\"`)，转换到服务器时区后，除年、月、日之外的部分被忽略，取闭区间。\n\n兼容参数：\n* `time`：如果只传一个时间参数 `time`，则截取对应时间的年、月部分，取当月 1 日 `start`，最后一天为 `end`\n\n可选参数：\n\n* `sectorID` 或 `sectorCode`：指定用能单元\n* `round`：忽略时返回原始值，设为 0 取值，设为 2 保留两位小数\n\n返回数值始终为字符串形式（无数据为 `null`），例如原始值为 `\"975.6\"`，则 `round` 为 2 时返回 `\"975.60\"`。\n\n返回值中的时间为 [ECMA 扩展的 ISO 8601 格式](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-time-string-format) 精确到日（`\"YYYY-MM-DD\"`）。\n（JavaScript 兼容性提示：`Date` 构造函数只在一部分实现中支持[这种格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format)，并且有可能会使用 UTC 时区。）","tags":["能源管理/能耗报表/用能单元能耗"],"parameters":[{"name":"sectorID","in":"query","description":"（可选）指定用能单元","required":false,"example":"","schema":{"type":"string"}},{"name":"sectorCode","in":"query","description":"（可选）指定用能单元","required":false,"example":"","schema":{"type":"string"}},{"name":"energyTypeID","in":"query","description":"能源类型标识","required":true,"example":"","schema":{"type":"string"}},{"name":"start","in":"query","description":"起始日期","required":true,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"截止日期","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"properties":{"success":{"default":true,"description":"成功时为 true","type":"boolean"},"data":{"description":"返回数据","items":{"properties":{"id":{"description":"用能单元标识","type":"string"},"name":{"description":"用能单元名称","type":"string"},"code":{"description":"用能单元编码","type":"string"},"perendID":{"description":"父级用能单元标识","type":"string"},"total":{"description":"指定时间段内的总能耗","type":"string"},"values":{"description":"逐日能耗","items":{"properties":{"time":{"description":"日期","type":"string"},"value":{"description":"此日能耗","type":"string"}},"required":["time","value"],"title":"Items","type":"object"},"type":"array"}},"required":["id","name","total","values"],"title":"Items","type":"object"},"type":"array"}},"required":["success","data"],"type":"object"},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": [\r\n\t\t{\r\n\t\t\t\"id\": \"5b5d77d655544fef87e357fc04b47d19\",\r\n\t\t\t\"name\": \"装三区\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"parentID\": \"cpel6is5naqkdv21hmsg\",\r\n\t\t\t\"total\": \"1399.44\",\r\n\t\t\t\"values\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-09\",\r\n\t\t\t\t\t\"value\": \"746.76\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-10\",\r\n\t\t\t\t\t\"value\": \"652.68\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"cpel6is5naqkdv21hmsg\",\r\n\t\t\t\"name\": \"厂区\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"total\": \"10876.2\",\r\n\t\t\t\"values\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-09\",\r\n\t\t\t\t\t\"value\": \"5801.73\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-10\",\r\n\t\t\t\t\t\"value\": \"5074.47\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t]\r\n}"}}}}}},"/ems/open_api/v1/report/sector/hourly":{"get":{"summary":"逐时能耗","description":"指定一个能源类型，查询所有用能单元在指定时间范围内每小时的能耗。\n\n必填参数：\n\n* `energyTypeID`：能源类型标识\n* `start`：起始时间\n* `end`：截止时间\n\n`start` 和 `end` 必须是 ISO 8601 完整时间格式（对应 [strptime(3)](https://linux.die.net/man/3/strptime) 格式 `\"%Y-%m-%dT%H:%M:%S%z\"`)，转换到服务器时区后，除年、月、日、时之外的部分被忽略，取闭区间。\n\n兼容参数：\n* `time`：如果只传一个时间参数 `time`，则截取对应时间的年、月、日部分，取当日 0 时为 `start`，23 时为 `end`\n\n可选参数：\n\n* `sectorID` 或 `sectorCode`：指定用能单元\n* `round`：忽略时返回原始值，设为 0 取值，设为 2 保留两位小数\n\n返回数值始终为字符串形式（无数据为 `null`），例如原始值为 `\"975.6\"`，则 `round` 为 2 时返回 `\"975.60\"`。\n\n返回值中的时间为 [ECMA 扩展的 ISO 8601 格式](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-time-string-format) 精确到分，替换分隔符 `T` 为空格，且分钟部分始终为零（`\"YYYY-MM-DD HH:00\"`）。\n（JavaScript 兼容性提示：`Date` 构造函数只在一部分实现中支持[这种格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format)，并且有可能会使用 UTC 时区。）","tags":["能源管理/能耗报表/用能单元能耗"],"parameters":[{"name":"sectorID","in":"query","description":"（可选）指定用能单元","required":false,"example":"","schema":{"type":"string"}},{"name":"sectorCode","in":"query","description":"（可选）指定用能单元","required":false,"example":"","schema":{"type":"string"}},{"name":"energyTypeID","in":"query","description":"能源类型标识","required":true,"example":"","schema":{"type":"string"}},{"name":"start","in":"query","description":"起始时间","required":true,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"截止时间","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"properties":{"success":{"default":true,"description":"成功时为 true","type":"boolean"},"data":{"description":"返回数据","items":{"properties":{"id":{"description":"用能单元标识","type":"string"},"name":{"description":"用能单元名称","type":"string"},"code":{"description":"用能单元编码","type":"string"},"perendID":{"description":"父级用能单元标识","type":"string"},"total":{"description":"指定时间段内的总能耗","type":"string"},"values":{"description":"逐时能耗","items":{"properties":{"time":{"description":"时间","type":"string"},"value":{"description":"此小时能耗","type":"string"}},"required":["time","value"],"title":"Items","type":"object"},"type":"array"}},"required":["id","name","total","values"],"title":"Items","type":"object"},"type":"array"}},"required":["success","data"],"type":"object"},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": [\r\n\t\t{\r\n\t\t\t\"id\": \"5b5d77d655544fef87e357fc04b47d19\",\r\n\t\t\t\"name\": \"装三区\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"parentID\": \"cpel6is5naqkdv21hmsg\",\r\n\t\t\t\"total\": \"93.24\",\r\n\t\t\t\"values\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-09 09:00\",\r\n\t\t\t\t\t\"value\": null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-09 10:00\",\r\n\t\t\t\t\t\"value\": \"93.24\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"cpel6is5naqkdv21hmsg\",\r\n\t\t\t\"name\": \"厂区\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"total\": \"725.31\",\r\n\t\t\t\"values\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-09 09:00\",\r\n\t\t\t\t\t\"value\": null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-09 10:00\",\r\n\t\t\t\t\t\"value\": \"725.31\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t]\r\n}"}}}}}},"/ems/open_api/v1/report/subentry/monthly":{"get":{"summary":"逐月能耗","description":"指定一级用能单元和一个能源类型，查询所有能源分项在指定时间范围内每个月的能耗。\n\n必填参数：\n\n* `sectorID` 或 `sectorCode`：一级用能单元\n* `energyTypeID`：能源类型标识\n* `start`：起始月份\n* `end`：截止月份\n\n`start` 和 `end` 必须是 ISO 8601 完整时间格式（对应 [strptime(3)](https://linux.die.net/man/3/strptime) 格式 `\"%Y-%m-%dT%H:%M:%S%z\"`)，转换到服务器时区后，除年、月之外的部分被忽略，取闭区间。\n\n兼容参数：\n* `time`：如果只传一个时间参数 `time`，则截取对应时间的年份，取当年 1 月 `start`，12 月为 `end`\n\n可选参数：\n\n* `subentryID` 或 `subentryCode`：指定分项\n* `round`：忽略时返回原始值，设为 0 取值，设为 2 保留两位小数\n\n返回数值始终为字符串形式（无数据为 `null`），例如原始值为 `\"975.6\"`，则 `round` 为 2 时返回 `\"975.60\"`。\n\n返回值中的时间为 [ECMA 扩展的 ISO 8601 格式](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-time-string-format) 精确到月份（`\"YYYY-MM\"`）。\n（JavaScript 兼容性提示：`Date` 构造函数只在一部分实现中支持[这种格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format)，并且有可能会使用 UTC 时区。）","tags":["能源管理/能耗报表/分项能耗"],"parameters":[{"name":"subentryID","in":"query","description":"（可选）指定分项","required":false,"example":"","schema":{"type":"string"}},{"name":"subentryCode","in":"query","description":"（可选）指定分项","required":false,"example":"","schema":{"type":"string"}},{"name":"sectorID","in":"query","description":"一级用能单元","required":true,"example":"","schema":{"type":"string"}},{"name":"sectorCode","in":"query","description":"一级用能单元","required":false,"example":"","schema":{"type":"string"}},{"name":"energyTypeID","in":"query","description":"能源类型标识","required":true,"example":"","schema":{"type":"string"}},{"name":"start","in":"query","description":"起始月份","required":true,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"截止月份","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"properties":{"success":{"default":true,"description":"成功时为 true","type":"boolean"},"data":{"description":"返回数据","items":{"properties":{"id":{"description":"分项标识","type":"string"},"name":{"description":"分项名称","type":"string"},"code":{"description":"分项编码","type":"string"},"perendID":{"description":"父级分项标识","type":"string"},"total":{"description":"指定时间段内的总能耗","type":"string"},"values":{"description":"逐月能耗","items":{"properties":{"time":{"description":"月份","type":"string"},"value":{"description":"此月能耗","type":"string"}},"required":["time","value"],"title":"Items","type":"object"},"type":"array"}},"required":["id","name","total","values"],"title":"Items","type":"object"},"type":"array"}},"required":["success","data"],"type":"object"},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": [\r\n\t\t{\r\n\t\t\t\"id\": \"5b5d77d655544fef87e357fc04b47d19\",\r\n\t\t\t\"name\": \"煤油\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"parentID\": \"cpel6is5naqkdv21hmsg\",\r\n\t\t\t\"total\": \"44971.08\",\r\n\t\t\t\"values\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-07\",\r\n\t\t\t\t\t\"value\": \"13791.96\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-08\",\r\n\t\t\t\t\t\"value\": \"16916.76\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09\",\r\n\t\t\t\t\t\"value\": \"14262.36\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"cpel6is5naqkdv21hmsg\",\r\n\t\t\t\"name\": \"油\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"total\": \"349457.08\",\r\n\t\t\t\"values\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-07\",\r\n\t\t\t\t\t\"value\": \"107190.1\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-08\",\r\n\t\t\t\t\t\"value\": \"131473.41\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09\",\r\n\t\t\t\t\t\"value\": \"110793.57\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t]\r\n}"}}}}}},"/ems/open_api/v1/report/subentry/daily":{"get":{"summary":"逐日能耗","description":"指定一级用能单元和一个能源类型，查询所有能源分项在指定时间范围内每天的能耗。\n\n必填参数：\n\n* `sectorID` 或 `sectorCode`：一级用能单元\n* `energyTypeID`：能源类型标识\n* `start`：起始日期\n* `end`：截止日期\n\n`start` 和 `end` 必须是 ISO 8601 完整时间格式（对应 [strptime(3)](https://linux.die.net/man/3/strptime) 格式 `\"%Y-%m-%dT%H:%M:%S%z\"`)，转换到服务器时区后，除年、月、日之外的部分被忽略，取闭区间。\n\n兼容参数：\n* `time`：如果只传一个时间参数 `time`，则截取对应时间的年、月部分，取当月 1 日 `start`，最后一天为 `end`\n\n可选参数：\n\n* `subentryID` 或 `subentryCode`：指定分项\n* `round`：忽略时返回原始值，设为 0 取值，设为 2 保留两位小数\n\n返回数值始终为字符串形式（无数据为 `null`），例如原始值为 `\"975.6\"`，则 `round` 为 2 时返回 `\"975.60\"`。\n\n返回值中的时间为 [ECMA 扩展的 ISO 8601 格式](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-time-string-format) 精确到日（`\"YYYY-MM-DD\"`）。\n（JavaScript 兼容性提示：`Date` 构造函数只在一部分实现中支持[这种格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format)，并且有可能会使用 UTC 时区。）","tags":["能源管理/能耗报表/分项能耗"],"parameters":[{"name":"subentryID","in":"query","description":"（可选）指定分项","required":false,"example":"","schema":{"type":"string"}},{"name":"subentryCode","in":"query","description":"（可选）指定分项","required":false,"example":"","schema":{"type":"string"}},{"name":"sectorID","in":"query","description":"一级用能单元","required":true,"example":"","schema":{"type":"string"}},{"name":"sectorCode","in":"query","description":"一级用能单元","required":false,"example":"","schema":{"type":"string"}},{"name":"energyTypeID","in":"query","description":"能源类型标识","required":true,"example":"","schema":{"type":"string"}},{"name":"start","in":"query","description":"起始日期","required":true,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"截止日期","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"properties":{"success":{"default":true,"description":"成功时为 true","type":"boolean"},"data":{"description":"返回数据","items":{"properties":{"id":{"description":"分项标识","type":"string"},"name":{"description":"分项名称","type":"string"},"code":{"description":"分项编码","type":"string"},"perendID":{"description":"父级分项标识","type":"string"},"total":{"description":"指定时间段内的总能耗","type":"string"},"values":{"description":"逐日能耗","items":{"properties":{"time":{"description":"日期","type":"string"},"value":{"description":"此日能耗","type":"string"}},"required":["time","value"],"title":"Items","type":"object"},"type":"array"}},"required":["id","name","total","values"],"title":"Items","type":"object"},"type":"array"}},"required":["success","data"],"type":"object"},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": [\r\n\t\t{\r\n\t\t\t\"id\": \"5b5d77d655544fef87e357fc04b47d19\",\r\n\t\t\t\"name\": \"煤油\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"parentID\": \"cpel6is5naqkdv21hmsg\",\r\n\t\t\t\"total\": \"1399.44\",\r\n\t\t\t\"values\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-09\",\r\n\t\t\t\t\t\"value\": \"746.76\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-10\",\r\n\t\t\t\t\t\"value\": \"652.68\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"cpel6is5naqkdv21hmsg\",\r\n\t\t\t\"name\": \"油\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"total\": \"10876.2\",\r\n\t\t\t\"values\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-09\",\r\n\t\t\t\t\t\"value\": \"5801.73\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"time\": \"2024-09-10\",\r\n\t\t\t\t\t\"value\": \"5074.47\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t]\r\n}"}}}}}},"/iot/open_api/v1/gateway/query":{"get":{"summary":"分页查询","description":"","tags":["设备互联/网关"],"parameters":[{"name":"isManaged","in":"query","description":"true：只查询纳管网关；false：只查询非纳管网关","required":false,"example":"","schema":{"type":"boolean"}},{"name":"userGroupID","in":"query","description":"指定用户组","required":false,"example":"","schema":{"type":"string"}},{"name":"search","in":"query","description":"搜索标识或名称","required":false,"example":"","schema":{"type":"string"}},{"name":"state","in":"query","description":"online：只查在线网关；offline：只查询离线网关","required":false,"example":"","schema":{"type":"string"}},{"name":"pageNum","in":"query","description":"分页页码","required":true,"example":"","schema":{"type":"number"}},{"name":"pageSize","in":"query","description":"每页大小","required":true,"example":"","schema":{"type":"number"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success","data"],"properties":{"success":{"mock":{"mock":""},"type":"boolean","default":true,"description":"成功时为 true"},"data":{"type":"object","required":["total"],"properties":{"total":{"type":"number","description":"总数"},"items":{"type":"array","items":{"type":"object","title":"Items","required":["id","name","version","state","isManaged"],"properties":{"id":{"type":"string","description":"网关标识"},"name":{"type":"string","description":"网关名称"},"version":{"type":"string","description":"协议版本"},"isManaged":{"type":"boolean","description":"是否为纳管网关"},"state":{"type":"integer","description":"网关状态；1：在线；0：离线"},"stateChangeTime":{"type":"string","format":"date-time","description":"状态更新时间","apipiost_allow_null":true},"description":{"type":"string","description":"网关描述"},"sn":{"type":"string","description":"序列号"},"manufacturer":{"type":"string","description":"生产厂商"},"type":{"type":"string","description":"网关型号"},"userGroupID":{"type":"string","description":"用户组标识"},"userGroupName":{"type":"string","description":"用户组名称"}}},"description":"当页数据","apipiost_allow_null":true}},"description":"返回数据"}}},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": {\r\n\t\t\"total\": 3,\r\n\t\t\"items\": [\r\n\t\t\t{\r\n\t\t\t\t\"id\": \"co1nm545naqh0p1iov1g\",\r\n\t\t\t\t\"name\": \"gatew 1\",\r\n\t\t\t\t\"type\": \"\",\r\n\t\t\t\t\"description\": \"\",\r\n\t\t\t\t\"version\": \"TopLink-V3\",\r\n\t\t\t\t\"sn\": \"\",\r\n\t\t\t\t\"manufacturer\": \"\",\r\n\t\t\t\t\"userGroupID\": \"\",\r\n\t\t\t\t\"userGroupName\": \"\",\r\n\t\t\t\t\"isManaged\": true,\r\n\t\t\t\t\"state\": 0,\r\n\t\t\t\t\"stateChangeTime\": null\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"id\": \"cpto1sc5naqidu6oafj0\",\r\n\t\t\t\t\"name\": \"gatew123\",\r\n\t\t\t\t\"type\": \"\",\r\n\t\t\t\t\"description\": \"\",\r\n\t\t\t\t\"version\": \"TopLink-V3\",\r\n\t\t\t\t\"sn\": \"\",\r\n\t\t\t\t\"manufacturer\": \"\",\r\n\t\t\t\t\"userGroupID\": \"\",\r\n\t\t\t\t\"userGroupName\": \"\",\r\n\t\t\t\t\"isManaged\": false,\r\n\t\t\t\t\"state\": 0,\r\n\t\t\t\t\"stateChangeTime\": null\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"id\": \"gateway_id\",\r\n\t\t\t\t\"name\": \"网关名称\",\r\n\t\t\t\t\"type\": \"型号\",\r\n\t\t\t\t\"description\": \"描述\",\r\n\t\t\t\t\"version\": \"TopLink-V3\",\r\n\t\t\t\t\"sn\": \"序列号\",\r\n\t\t\t\t\"manufacturer\": \"厂商\",\r\n\t\t\t\t\"userGroupID\": \"coji7p45naqi545t9cug\",\r\n\t\t\t\t\"userGroupName\": \"请问\",\r\n\t\t\t\t\"isManaged\": true,\r\n\t\t\t\t\"state\": 0,\r\n\t\t\t\t\"stateChangeTime\": null\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}"}}}}}},"/iot/open_api/v1/gateway/for_select":{"get":{"summary":"简略查询","description":"","tags":["设备互联/网关"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success","data"],"properties":{"success":{"mock":{"mock":""},"type":"boolean","default":true,"description":"成功时为 true"},"data":{"type":"array","items":{"type":"object","title":"Items","required":["id","name","isManaged"],"properties":{"id":{"type":"string","description":"网关标识"},"name":{"type":"string","description":"网关名称"},"isManaged":{"type":"string","description":"是否为纳管网关"},"description":{"type":"string","description":"网关描述"}}},"required":[],"properties":{},"description":"所有网关"}}},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": [\r\n\t\t{\r\n\t\t\t\"id\": \"cpto1sc5naqidu6oafj0\",\r\n\t\t\t\"name\": \"gatew123\",\r\n\t\t\t\"description\": \"\",\r\n\t\t\t\"isManaged\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"gateway_id\",\r\n\t\t\t\"name\": \"网关名称\",\r\n\t\t\t\"description\": \"描述\",\r\n\t\t\t\"isManaged\": true\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"co1nm545naqh0p1iov1g\",\r\n\t\t\t\"name\": \"gatew 1\",\r\n\t\t\t\"description\": \"\",\r\n\t\t\t\"isManaged\": true\r\n\t\t}\r\n\t]\r\n}"}}}}}},"/iot/open_api/v1/gateway/one/:gatewayID":{"get":{"summary":"单网关简略查询","description":"","tags":["设备互联/网关"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"}}},"example":"{\r\n\t\"code\": \"err_not_found\"\r\n}"}}}}}},"/iot/open_api/v1/gateway/info/:gatewayID":{"get":{"summary":"单网关查询","description":"","tags":["设备互联/网关"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"}}},"example":"{\r\n\t\"code\": \"err_not_found\"\r\n}"}}}}}},"/asset/open_api/v1/alert_work_order":{"get":{"summary":"工单查询","description":"查询工单。\n\n可以指定的筛选条件如下：\n\n* `start` 和 `end`：时间条件\n* `status`：工单状态\n* `code`：工单编号\n* `deviceName`：设备名称\n* `deviceCode`：设备编号\n* `maintenanceStatus`：维保状态，1=保内、2=保外\n* `pageSize` 和 `pageNum`：分页查询\n\n## 时间条件\n\n查询条件 `start` 和 `end` 用于指定工单创建时间的范围，未指定时默认查询过去24小时内创建的工单。\n\n`start` 和 `end` 应当为 [RFC3339](https://www.rfc-editor.org/rfc/rfc3339) 格式，且需注意带时区时 `\"+\"` 在 URL 中需要转义。\n\n例如，查询北京时间 2024年11月1日 至今的工单：\n`?start=2024-11-01T00:00:00%2B08:00`\n\n查询北京时间 2024年11月1日 当天创建的工单：\n`?start=2024-11-01T00:00:00%2B08:00&end=2024-11-02T00:00:00%2B08:00`\n\n## 状态筛选\n\n查询条件 `status` 用于筛选工单状态，参数值对应含义如下：\n\n* 0：未执行\n* 1：执行中\n* 2：待审核（完成执行）\n* 3：已驳回（审核未通过）\n* 4：已完成（审核通过）\n\n`status` 参数可以指定多次。\n\n例如，查询所有待审核的工单：\n`?status=2`\n\n查询所有待审核、已驳回、已完成的工单：\n`?status=2&status=3&status=4`\n\n## 分页查询\n\n默认情况下，查询满足条件的所有工单，响应体中 `data` 为一个列表。\n如果预期工单数量较多，可能导致查询时间较长甚至超时。\n为了优化查询速度，首先可以尝试使用 `start` 和 `end` 添加时间条件。\n其次可以使用分页查询。\n\n指定了参数 `pageSize` 时，开启分页查询，`pageSize` 应当是一个不超过 1000 的正整数，表示每页包含的数据条数。此时，参数 `pageNum` 用于指定页码，默认为 1。\n\n开启了分页查询时，响应体中 `data` 为一个对象，`data.total` 为满足条件的所有工单数量，`data.items` 为当前分页的工单列表。\n\n","tags":["维护管理/告警工单"],"parameters":[{"name":"start","in":"query","description":"创建时间下限","required":false,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"创建时间上限","required":false,"example":"","schema":{"type":"string"}},{"name":"status","in":"query","description":"工单状态","required":false,"example":"","schema":{"type":"string"}},{"name":"code","in":"query","description":"工单编号","required":false,"example":"","schema":{"type":"string"}},{"name":"deviceName","in":"query","description":"设备名称","required":false,"example":"","schema":{"type":"string"}},{"name":"deviceCode","in":"query","description":"设备编号","required":false,"example":"","schema":{"type":"string"}},{"name":"pageSize","in":"query","description":"分页大小","required":false,"example":"","schema":{"type":"string"}},{"name":"pageNum","in":"query","description":"分页页码","required":false,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功（分页）","content":{"application/json":{"schema":{"type":"object","required":["success","data"],"properties":{"success":{"type":"boolean","description":"成功时为 true"},"data":{"type":"object","required":["total"],"properties":{"total":{"type":"integer","description":"满足条件的工单数量"},"items":{"type":"array","items":{"type":"object","title":"Items","required":["status","deviceCode","id","code","deviceID","deviceName","content","createdAt","startTime","endTime","executeTime","completeTime","completeRemark","reviewTime","reviewRemark","alertRecordID","alertStatus","alertCreatedAt","alertRecoveredAt","alertTitle","alertContent","alertLevelCode","alertLevelColor","alertLevelName","alertTypeCode","alertTypeName"],"properties":{"id":{"type":"string","description":"工单ID"},"code":{"type":"string","description":"工单编号"},"deviceID":{"type":"string","description":"设备标识"},"deviceName":{"type":"string","description":"设备名称"},"deviceCode":{"type":"string","description":"设备编码"},"status":{"enum":[0,1,2,3,4],"type":"integer","description":"工单状态，0=未执行、1=执行中、2=待审核、3=已驳回、4=已完成","apipost_enable_enum":true},"content":{"type":"string","description":"工单任务"},"createdAt":{"type":"string","format":"date-time","description":"工单创建时间"},"startTime":{"type":"string","format":"date-time","description":"建议开始时间"},"endTime":{"type":"string","format":"date-time","description":"建议完成时间"},"executorID":{"type":"string","description":"执行人ID"},"executorName":{"type":"string","description":"执行人姓名"},"executorUsername":{"type":"string","description":"执行人用户名"},"executeTime":{"type":"string","format":"date-time","description":"开始执行时间","apipiost_allow_null":true},"completeTime":{"type":"string","format":"date-time","description":"完成执行时间","apipiost_allow_null":true},"completeRemark":{"type":"string","description":"完成执行说明"},"reviewerID":{"type":"string","description":"审核人ID"},"reviewerName":{"type":"string","description":"审核人姓名"},"reviewerUsername":{"type":"string","description":"审核人用户名"},"reviewTime":{"type":"string","format":"date-time","description":"审核时间","apipiost_allow_null":true},"reviewRemark":{"type":"string","description":"审核意见"},"attachmentExt":{"type":"string","description":"附件扩展名"},"alertRecordID":{"type":"string","description":"告警记录ID"},"alertStatus":{"enum":["unhandled","handled","auto"],"type":"string","description":"告警状态，unhandled=未确认、handled=已确认、auto=无需确认","apipost_enable_enum":true},"alertCreatedAt":{"type":"string","format":"date-time","description":"告警时间"},"alertRecoveredAt":{"type":"string","format":"date-time","description":"告警解除时间","apipiost_allow_null":true},"alertTitle":{"type":"string","description":"告警标题"},"alertContent":{"type":"string","description":"告警信息"},"alertLevelCode":{"type":"string","description":"告警等级编码"},"alertLevelColor":{"type":"string","description":"告警等级颜色"},"alertLevelName":{"type":"string","description":"告警等级名称"},"alertTypeCode":{"type":"string","description":"告警类型编码"},"alertTypeName":{"type":"string","description":"告警类型名称"}}},"description":"当前分页下的工单列表"}}}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}},"put":{"summary":"编辑工单","description":"编辑工单。\n\n必填字段如果无修改，应当将工单查询结果中的对应字段原样填入。\n","tags":["维护管理/告警工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id","startTime","endTime","executorID","reviewerID"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"},"startTime":{"mock":{"mock":"@empty()"},"type":"string","description":"建议开始时间，必填"},"endTime":{"mock":{"mock":"@empty()"},"type":"string","description":"建议结束时间，必填"},"executorID":{"mock":{"mock":"@empty()"},"type":"string","description":"执行人ID，必填"},"reviewerID":{"mock":{"mock":"@empty()"},"type":"string","description":"审核人ID，必填"},"content":{"mock":{"mock":"@empty()"},"type":"string","description":"工单任务"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/alert_work_order/execute/start":{"post":{"summary":"执行开始","description":"开始执行工单，原则上应当由工单中指定的执行人操作。\n\n操作成功后，工单状态变为 1（执行中）。","tags":["维护管理/告警工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/alert_work_order/execute/complete":{"post":{"summary":"执行完成","description":"完成执行工单，原则上应当由工单中指定的执行人操作。\n\n操作成功后，工单状态变为 2（待审核）。","tags":["维护管理/告警工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"},"remark":{"type":"string","description":"完成说明"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/locale_work_order":{"get":{"summary":"工单查询","description":"查询工单。\n\n可以指定的筛选条件如下：\n\n* `start` 和 `end`：时间条件\n* `status`：工单状态\n* `code`：工单编号\n* `deviceName`：设备（资产）名称\n* `deviceCode`：设备（资产）编号\n* `maintenanceStatus`：维保状态，1=保内、2=保外\n* `pageSize` 和 `pageNum`：分页查询\n\n## 时间条件\n\n查询条件 `start` 和 `end` 用于指定工单创建时间的范围，未指定时默认查询过去24小时内创建的工单。\n\n`start` 和 `end` 应当为 [RFC3339](https://www.rfc-editor.org/rfc/rfc3339) 格式，且需注意带时区时 `\"+\"` 在 URL 中需要转义。\n\n例如，查询北京时间 2024年11月1日 至今的工单：\n`?start=2024-11-01T00:00:00%2B08:00`\n\n查询北京时间 2024年11月1日 当天创建的工单：\n`?start=2024-11-01T00:00:00%2B08:00&end=2024-11-02T00:00:00%2B08:00`\n\n## 状态筛选\n\n查询条件 `status` 用于筛选工单状态，参数值对应含义如下：\n\n* 0：未执行\n* 1：执行中\n* 2：待审核（完成执行）\n* 3：已驳回（审核未通过）\n* 4：已完成（审核通过）\n\n`status` 参数可以指定多次。\n\n例如，查询所有待审核的工单：\n`?status=2`\n\n查询所有待审核、已驳回、已完成的工单：\n`?status=2&status=3&status=4`\n\n## 分页查询\n\n默认情况下，查询满足条件的所有工单，响应体中 `data` 为一个列表。\n如果预期工单数量较多，可能导致查询时间较长甚至超时。\n为了优化查询速度，首先可以尝试使用 `start` 和 `end` 添加时间条件。\n其次可以使用分页查询。\n\n指定了参数 `pageSize` 时，开启分页查询，`pageSize` 应当是一个不超过 1000 的正整数，表示每页包含的数据条数。此时，参数 `pageNum` 用于指定页码，默认为 1。\n\n开启了分页查询时，响应体中 `data` 为一个对象，`data.total` 为满足条件的所有工单数量，`data.items` 为当前分页的工单列表。\n\n","tags":["维护管理/现场工单"],"parameters":[{"name":"start","in":"query","description":"创建时间下限","required":false,"example":"","schema":{"type":"date"}},{"name":"end","in":"query","description":"创建时间上限","required":false,"example":"","schema":{"type":"date"}},{"name":"status","in":"query","description":"工单状态","required":false,"example":"","schema":{"type":"integer"}},{"name":"code","in":"query","description":"工单编号","required":false,"example":"","schema":{"type":"string"}},{"name":"deviceName","in":"query","description":"设备（资产）名称","required":false,"example":"","schema":{"type":"string"}},{"name":"deviceCode","in":"query","description":"设备（资产）编号","required":false,"example":"","schema":{"type":"string"}},{"name":"pageSize","in":"query","description":"分页大小","required":false,"example":"","schema":{"type":"integer"}},{"name":"pageNum","in":"query","description":"分页页码","required":false,"example":"","schema":{"type":"integer"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功（分页）","content":{"application/json":{"schema":{"type":"object","required":["success","data"],"properties":{"success":{"type":"boolean","description":"成功时为 true"},"data":{"type":"object","required":["total"],"properties":{"total":{"type":"integer","description":"满足条件的工单数量"},"items":{"type":"array","items":{"type":"object","title":"Items","required":["status","deviceCode","id","code","deviceID","deviceName","content","createdAt","startTime","endTime","executeTime","completeTime","completeRemark","reviewTime","reviewRemark"],"properties":{"id":{"type":"string","description":"工单ID"},"code":{"type":"string","description":"工单编号"},"deviceID":{"type":"string","description":"设备（资产）标识"},"deviceName":{"type":"string","description":"设备（资产）名称"},"deviceCode":{"type":"string","description":"设备（资产）编码"},"status":{"enum":[0,1,2,3,4],"type":"integer","description":"工单状态，0=未执行、1=执行中、2=待审核、3=已驳回、4=已完成","apipost_enable_enum":true},"content":{"type":"string","description":"工单任务"},"createdAt":{"type":"string","format":"date-time","description":"工单创建时间"},"startTime":{"type":"string","format":"date-time","description":"建议开始时间"},"endTime":{"type":"string","format":"date-time","description":"建议完成时间"},"executorID":{"type":"string","description":"执行人ID"},"executorName":{"type":"string","description":"执行人姓名"},"executorUsername":{"type":"string","description":"执行人用户名"},"executeTime":{"type":"string","format":"date-time","description":"开始执行时间","apipiost_allow_null":true},"completeTime":{"type":"string","format":"date-time","description":"完成执行时间","apipiost_allow_null":true},"completeRemark":{"type":"string","description":"完成执行说明"},"reviewerID":{"type":"string","description":"审核人ID"},"reviewerName":{"type":"string","description":"审核人姓名"},"reviewerUsername":{"type":"string","description":"审核人用户名"},"reviewTime":{"type":"string","format":"date-time","description":"审核时间","apipiost_allow_null":true},"reviewRemark":{"type":"string","description":"审核意见"},"attachmentExt":{"type":"string","description":"附件扩展名"}}},"description":"当前分页下的工单列表"}}}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}},"put":{"summary":"编辑工单","description":"编辑工单。\n\n必填字段如果无修改，应当将工单查询结果中的对应字段原样填入。\n","tags":["维护管理/现场工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id","startTime","endTime","executorID","reviewerID"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"},"startTime":{"mock":{"mock":"@empty()"},"type":"string","description":"建议开始时间，必填"},"endTime":{"mock":{"mock":"@empty()"},"type":"string","description":"建议结束时间，必填"},"executorID":{"mock":{"mock":"@empty()"},"type":"string","description":"执行人ID，必填"},"reviewerID":{"mock":{"mock":"@empty()"},"type":"string","description":"审核人ID，必填"},"content":{"mock":{"mock":"@empty()"},"type":"string","description":"工单任务"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/locale_work_order/execute/start":{"post":{"summary":"执行开始","description":"开始执行工单，原则上应当由工单中指定的执行人操作。\n\n操作成功后，工单状态变为 1（执行中）。","tags":["维护管理/现场工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/locale_work_order/execute/complete":{"post":{"summary":"执行完成","description":"完成执行工单，原则上应当由工单中指定的执行人操作。\n\n操作成功后，工单状态变为 2（待审核）。","tags":["维护管理/现场工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"},"remark":{"type":"string","description":"完成说明"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/maintenance_work_order":{"get":{"summary":"工单查询","description":"查询工单。\n\n可以指定的筛选条件如下：\n\n* `start` 和 `end`：时间条件\n* `status`：工单状态\n* `code`：工单编号\n* `deviceName`：设备（资产）名称\n* `deviceCode`：设备（资产）编号\n* `maintenanceStatus`：维保状态，1=保内、2=保外\n* `pageSize` 和 `pageNum`：分页查询\n\n## 时间条件\n\n查询条件 `start` 和 `end` 用于指定工单创建时间的范围，未指定时默认查询过去24小时内创建的工单。\n\n`start` 和 `end` 应当为 [RFC3339](https://www.rfc-editor.org/rfc/rfc3339) 格式，且需注意带时区时 `\"+\"` 在 URL 中需要转义。\n\n例如，查询北京时间 2024年11月1日 至今的工单：\n`?start=2024-11-01T00:00:00%2B08:00`\n\n查询北京时间 2024年11月1日 当天创建的工单：\n`?start=2024-11-01T00:00:00%2B08:00&end=2024-11-02T00:00:00%2B08:00`\n\n## 状态筛选\n\n查询条件 `status` 用于筛选工单状态，参数值对应含义如下：\n\n* 0：未执行\n* 1：执行中\n* 2：待审核（完成执行）\n* 3：已驳回（审核未通过）\n* 4：已完成（审核通过）\n\n`status` 参数可以指定多次。\n\n例如，查询所有待审核的工单：\n`?status=2`\n\n查询所有待审核、已驳回、已完成的工单：\n`?status=2&status=3&status=4`\n\n## 分页查询\n\n默认情况下，查询满足条件的所有工单，响应体中 `data` 为一个列表。\n如果预期工单数量较多，可能导致查询时间较长甚至超时。\n为了优化查询速度，首先可以尝试使用 `start` 和 `end` 添加时间条件。\n其次可以使用分页查询。\n\n指定了参数 `pageSize` 时，开启分页查询，`pageSize` 应当是一个不超过 1000 的正整数，表示每页包含的数据条数。此时，参数 `pageNum` 用于指定页码，默认为 1。\n\n开启了分页查询时，响应体中 `data` 为一个对象，`data.total` 为满足条件的所有工单数量，`data.items` 为当前分页的工单列表。\n\n","tags":["维护管理/维护工单"],"parameters":[{"name":"start","in":"query","description":"创建时间下限","required":false,"example":"","schema":{"type":"date"}},{"name":"end","in":"query","description":"创建时间上限","required":false,"example":"","schema":{"type":"date"}},{"name":"status","in":"query","description":"工单状态","required":false,"example":"","schema":{"type":"integer"}},{"name":"code","in":"query","description":"工单编号","required":false,"example":"","schema":{"type":"string"}},{"name":"deviceName","in":"query","description":"设备（资产）名称","required":false,"example":"","schema":{"type":"string"}},{"name":"deviceCode","in":"query","description":"设备（资产）编号","required":false,"example":"","schema":{"type":"string"}},{"name":"pageSize","in":"query","description":"分页大小","required":false,"example":"","schema":{"type":"integer"}},{"name":"pageNum","in":"query","description":"分页页码","required":false,"example":"","schema":{"type":"integer"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功（分页）","content":{"application/json":{"schema":{"type":"object","required":["success","data"],"properties":{"success":{"type":"boolean","description":"成功时为 true"},"data":{"type":"object","required":["total"],"properties":{"total":{"type":"integer","description":"满足条件的工单数量"},"items":{"type":"array","items":{"type":"object","title":"Items","required":["status","deviceCode","id","code","deviceID","deviceName","content","createdAt","startTime","endTime","executeTime","completeTime","completeRemark","reviewTime","reviewRemark"],"properties":{"id":{"type":"string","description":"工单ID"},"code":{"type":"string","description":"工单编号"},"deviceID":{"type":"string","description":"设备（资产）标识"},"deviceName":{"type":"string","description":"设备（资产）名称"},"deviceCode":{"type":"string","description":"设备（资产）编码"},"status":{"enum":[0,1,2,3,4],"type":"integer","description":"工单状态，0=未执行、1=执行中、2=待审核、3=已驳回、4=已完成","apipost_enable_enum":true},"content":{"type":"string","description":"工单任务"},"createdAt":{"type":"string","format":"date-time","description":"工单创建时间"},"startTime":{"type":"string","format":"date-time","description":"建议开始时间"},"endTime":{"type":"string","format":"date-time","description":"建议完成时间"},"executorID":{"type":"string","description":"执行人ID"},"executorName":{"type":"string","description":"执行人姓名"},"executorUsername":{"type":"string","description":"执行人用户名"},"executeTime":{"type":"string","format":"date-time","description":"开始执行时间","apipiost_allow_null":true},"completeTime":{"type":"string","format":"date-time","description":"完成执行时间","apipiost_allow_null":true},"completeRemark":{"type":"string","description":"完成执行说明"},"reviewerID":{"type":"string","description":"审核人ID"},"reviewerName":{"type":"string","description":"审核人姓名"},"reviewerUsername":{"type":"string","description":"审核人用户名"},"reviewTime":{"type":"string","format":"date-time","description":"审核时间","apipiost_allow_null":true},"reviewRemark":{"type":"string","description":"审核意见"},"attachmentExt":{"type":"string","description":"附件扩展名"}}},"description":"当前分页下的工单列表"}}}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}},"put":{"summary":"编辑工单","description":"编辑工单。\n\n必填字段如果无修改，应当将工单查询结果中的对应字段原样填入。\n","tags":["维护管理/维护工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id","startTime","endTime","executorID","reviewerID"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"},"startTime":{"mock":{"mock":"@empty()"},"type":"string","description":"建议开始时间，必填"},"endTime":{"mock":{"mock":"@empty()"},"type":"string","description":"建议结束时间，必填"},"executorID":{"mock":{"mock":"@empty()"},"type":"string","description":"执行人ID，必填"},"reviewerID":{"mock":{"mock":"@empty()"},"type":"string","description":"审核人ID，必填"},"content":{"mock":{"mock":"@empty()"},"type":"string","description":"工单任务"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/maintenance_work_order/execute/start":{"post":{"summary":"执行开始","description":"开始执行工单，原则上应当由工单中指定的执行人操作。\n\n操作成功后，工单状态变为 1（执行中）。","tags":["维护管理/维护工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/maintenance_work_order/execute/complete":{"post":{"summary":"执行完成","description":"完成执行工单，原则上应当由工单中指定的执行人操作。\n\n操作成功后，工单状态变为 2（待审核）。","tags":["维护管理/维护工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"},"remark":{"type":"string","description":"完成说明"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/schedule_work_order":{"get":{"summary":"工单查询","description":"查询工单。\n\n可以指定的筛选条件如下：\n\n* `start` 和 `end`：时间条件\n* `status`：工单状态\n* `code`：工单编号\n* `deviceName`：设备（资产）名称\n* `deviceCode`：设备（资产）编号\n* `maintenanceStatus`：维保状态，1=保内、2=保外\n* `pageSize` 和 `pageNum`：分页查询\n\n## 时间条件\n\n查询条件 `start` 和 `end` 用于指定工单创建时间的范围，未指定时默认查询过去24小时内创建的工单。\n\n`start` 和 `end` 应当为 [RFC3339](https://www.rfc-editor.org/rfc/rfc3339) 格式，且需注意带时区时 `\"+\"` 在 URL 中需要转义。\n\n例如，查询北京时间 2024年11月1日 至今的工单：\n`?start=2024-11-01T00:00:00%2B08:00`\n\n查询北京时间 2024年11月1日 当天创建的工单：\n`?start=2024-11-01T00:00:00%2B08:00&end=2024-11-02T00:00:00%2B08:00`\n\n## 状态筛选\n\n查询条件 `status` 用于筛选工单状态，参数值对应含义如下：\n\n* 0：未执行\n* 1：执行中\n* 2：待审核（完成执行）\n* 3：已驳回（审核未通过）\n* 4：已完成（审核通过）\n\n`status` 参数可以指定多次。\n\n例如，查询所有待审核的工单：\n`?status=2`\n\n查询所有待审核、已驳回、已完成的工单：\n`?status=2&status=3&status=4`\n\n## 分页查询\n\n默认情况下，查询满足条件的所有工单，响应体中 `data` 为一个列表。\n如果预期工单数量较多，可能导致查询时间较长甚至超时。\n为了优化查询速度，首先可以尝试使用 `start` 和 `end` 添加时间条件。\n其次可以使用分页查询。\n\n指定了参数 `pageSize` 时，开启分页查询，`pageSize` 应当是一个不超过 1000 的正整数，表示每页包含的数据条数。此时，参数 `pageNum` 用于指定页码，默认为 1。\n\n开启了分页查询时，响应体中 `data` 为一个对象，`data.total` 为满足条件的所有工单数量，`data.items` 为当前分页的工单列表。\n\n","tags":["维护管理/计划工单"],"parameters":[{"name":"start","in":"query","description":"创建时间下限","required":false,"example":"","schema":{"type":"date"}},{"name":"end","in":"query","description":"创建时间上限","required":false,"example":"","schema":{"type":"date"}},{"name":"status","in":"query","description":"工单状态","required":false,"example":"","schema":{"type":"integer"}},{"name":"code","in":"query","description":"工单编号","required":false,"example":"","schema":{"type":"string"}},{"name":"deviceName","in":"query","description":"设备（资产）名称","required":false,"example":"","schema":{"type":"string"}},{"name":"deviceCode","in":"query","description":"设备（资产）编号","required":false,"example":"","schema":{"type":"string"}},{"name":"pageSize","in":"query","description":"分页大小","required":false,"example":"","schema":{"type":"integer"}},{"name":"pageNum","in":"query","description":"分页页码","required":false,"example":"","schema":{"type":"integer"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功（分页）","content":{"application/json":{"schema":{"type":"object","required":["success","data"],"properties":{"success":{"type":"boolean","description":"成功时为 true"},"data":{"type":"object","required":["total"],"properties":{"total":{"type":"integer","description":"满足条件的工单数量"},"items":{"type":"array","items":{"type":"object","title":"Items","required":["status","deviceCode","id","code","deviceID","deviceName","content","createdAt","startTime","endTime","executeTime","completeTime","completeRemark","reviewTime","reviewRemark"],"properties":{"id":{"type":"string","description":"工单ID"},"code":{"type":"string","description":"工单编号"},"deviceID":{"type":"string","description":"设备（资产）标识"},"deviceName":{"type":"string","description":"设备（资产）名称"},"deviceCode":{"type":"string","description":"设备（资产）编码"},"status":{"enum":[0,1,2,3,4],"type":"integer","description":"工单状态，0=未执行、1=执行中、2=待审核、3=已驳回、4=已完成","apipost_enable_enum":true},"content":{"type":"string","description":"工单任务"},"createdAt":{"type":"string","format":"date-time","description":"工单创建时间"},"startTime":{"type":"string","format":"date-time","description":"建议开始时间"},"endTime":{"type":"string","format":"date-time","description":"建议完成时间"},"executorID":{"type":"string","description":"执行人ID"},"executorName":{"type":"string","description":"执行人姓名"},"executorUsername":{"type":"string","description":"执行人用户名"},"executeTime":{"type":"string","format":"date-time","description":"开始执行时间","apipiost_allow_null":true},"completeTime":{"type":"string","format":"date-time","description":"完成执行时间","apipiost_allow_null":true},"completeRemark":{"type":"string","description":"完成执行说明"},"reviewerID":{"type":"string","description":"审核人ID"},"reviewerName":{"type":"string","description":"审核人姓名"},"reviewerUsername":{"type":"string","description":"审核人用户名"},"reviewTime":{"type":"string","format":"date-time","description":"审核时间","apipiost_allow_null":true},"reviewRemark":{"type":"string","description":"审核意见"},"attachmentExt":{"type":"string","description":"附件扩展名"}}},"description":"当前分页下的工单列表"}}}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}},"put":{"summary":"编辑工单","description":"编辑工单。\n\n必填字段如果无修改，应当将工单查询结果中的对应字段原样填入。\n","tags":["维护管理/计划工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id","startTime","endTime","executorID","reviewerID"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"},"startTime":{"mock":{"mock":"@empty()"},"type":"string","description":"建议开始时间，必填"},"endTime":{"mock":{"mock":"@empty()"},"type":"string","description":"建议结束时间，必填"},"executorID":{"mock":{"mock":"@empty()"},"type":"string","description":"执行人ID，必填"},"reviewerID":{"mock":{"mock":"@empty()"},"type":"string","description":"审核人ID，必填"},"content":{"mock":{"mock":"@empty()"},"type":"string","description":"工单任务"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/schedule_work_order/execute/start":{"post":{"summary":"执行开始","description":"开始执行工单，原则上应当由工单中指定的执行人操作。\n\n操作成功后，工单状态变为 1（执行中）。","tags":["维护管理/计划工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/asset/open_api/v1/schedule_work_order/execute/complete":{"post":{"summary":"执行完成","description":"完成执行工单，原则上应当由工单中指定的执行人操作。\n\n操作成功后，工单状态变为 2（待审核）。","tags":["维护管理/计划工单"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"mock":{"mock":"@empty()"},"type":"string","description":"工单ID，必填"},"remark":{"type":"string","description":"完成说明"}}},"example":""}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","description":"成功时为 true"}}},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误描述"}}},"example":""}}}}}},"/apm/open_api/v1/performance/state/last":{"get":{"summary":"查询当前状态","description":"查询设备当前状态。\n\n","tags":["维护管理/设备绩效"],"parameters":[{"name":"deviceID","in":"query","description":"设备标识","required":false,"example":"","schema":{"type":"date"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功（分页）","content":{"application/json":{"schema":{"properties":{},"required":[],"type":"object"},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"properties":{"code":{"description":"错误码","type":"string"},"msg":{"description":"错误描述","type":"string"}},"required":["code"],"type":"object"},"example":""}}}}}},"/apm/open_api/v1/performance/state/count":{"get":{"summary":"设备状态统计","description":"统计不同状态下的设备数。\n\n可以指定的筛选条件如下：\n\n* `groupID`：设备分组标识，可以为空，如果指定了设备分组则统计该分组下的所有设备\n\n\n","tags":["维护管理/设备绩效"],"parameters":[{"name":"groudID","in":"query","description":"设备分组标识，可以为空","required":false,"example":"","schema":{"type":"date"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功（分页）","content":{"application/json":{"schema":{"properties":{},"required":[],"type":"object"},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"properties":{"code":{"description":"错误码","type":"string"},"msg":{"description":"错误描述","type":"string"}},"required":["code"],"type":"object"},"example":""}}}}}},"/apm/open_api/v1/performance/eval/count":{"get":{"summary":"设备评价统计","description":"统计不同评价的设备数。\n\n可以指定的筛选条件如下：\n\n* `groupID`：设备分组标识，可以为空，如果指定了设备分组则统计该分组下的所有设备\n\n\n","tags":["维护管理/设备绩效"],"parameters":[{"name":"groudID","in":"query","description":"设备分组标识，可以为空","required":false,"example":"","schema":{"type":"date"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功（分页）","content":{"application/json":{"schema":{"properties":{},"required":[],"type":"object"},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"properties":{"code":{"description":"错误码","type":"string"},"msg":{"description":"错误描述","type":"string"}},"required":["code"],"type":"object"},"example":""}}}}}},"/apm/open_api/v1/performance/state/daily":{"get":{"summary":"查询日状态记录","description":"查询指定日期的设备状态记录。\n\n","tags":["维护管理/设备绩效"],"parameters":[{"name":"deviceID","in":"query","description":"设备标识","required":false,"example":"","schema":{"type":"date"}},{"name":"date","in":"query","description":"日期时间","required":true,"example":"","schema":{"type":"date"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功（分页）","content":{"application/json":{"schema":{"properties":{},"required":[],"type":"object"},"example":""}}},"500":{"description":"失败","content":{"application/json":{"schema":{"properties":{"code":{"description":"错误码","type":"string"},"msg":{"description":"错误描述","type":"string"}},"required":["code"],"type":"object"},"example":""}}}}}},"/iot/open_api/v1/misc/device_count":{"get":{"summary":"设备数量（全局）","description":"查询当前项目下的设备总数。\n\n以下字段可用于筛选设备：\n\n* `state`：指定设备状态（0=离线，1=在线），不过滤设备状态时必须去除此选项\n* `typeID`：指定设备模型标识\n* `tags`：指定设备标签（详见后文）\n* `emptyGroup`：如果为`true`或`1`，则只查询未分组设备\n* `groupID`：指定设备分组标识（`emptyGroup`为`true`或`1`时忽略此选项）\n* `restrictGroup`：如果为`true`或`1`，则`groupID`为严格匹配，不包含下级分组（默认包含下级）\n* `search`：指定设备标识或名称（模糊查询）\n\n## 设备标签查询\n\n首先，以标签名为 key、标签值为 value，构造一个符合 [RFC3986](https://www.rfc-editor.org/rfc/rfc3986) 标准的 query。<br/>\n标签值如果没有指定，表示只要求标签存在，标签的值不限。<br/>\n不同的标签之间是 AND 的关系；同一个标签如果指定多次，对应的标签值之间是 OR 的关系。\n\n然后将这个 query 整体作为 `tags` 参数。\n\n注意，因为 `tags` 是 HTTP GET 请求的参数，实际上很可能按照 RFC3986 标准还需要转义一次（`&` → `%26`, `=` → `%3D`，`%` → `%25`）。\n\n例1. 设备必须有 `tag1` 标签（标签的值不限）：<br/>\n标签查询：`tag1` <br/>\n完整查询：`tags=tag1`\n\n例2. 设备必须有 `tag1` 标签和 `tag2` 标签（标签的值不限）：<br/>\n标签查询：`tag1&tag2` <br/>\n完整查询：`tags=tag1%26tag2`\n\n例3. 设备必须有 `tag1` 标签，且它的值是 `x` 或者 `y` ：<br/>\n标签查询：`tag1=x&tag1=y` <br/>\n完整查询：`tags=tag1%3Dx%26tag1%3Dy`\n\n例4. 设备必须有 `tag1` 标签和 `tag2` 标签，且 `tag1` 的值是 `x` 或者 `y`，`tag2` 的值是 `好` ：<br/>\n标签查询：`tag1=x&tag1=y&tag2=%E5%A5%BD` <br/>\n完整查询：`tags=tag1%3Dx%26tag1%3Dy%26tag2%3D%25E5%25A5%25BD` <br/>\n注意这里汉字本身就转义了一次，所以最后共转义了两次。\n\nJavaScript 代码示例:\n\n```javascript\nlet deviceTags = new URLSearchParams();\ndeviceTags.append('tag1', 'x');\ndeviceTags.append('tag1', 'y');\ndeviceTags.append('tag2', '好');\n\naxios.get(`${Host}/iot/open_api/v1/misc/device_count`, {\n    headers: {\n        'X-ProjectID': `${ProjectID}`,\n        'X-API-KEY': `${ApiKey}`,\n    },\n    params: \n        'tags': deviceTags.toString(),\n    },\n})\n```","tags":["设备互联/设备"],"parameters":[{"name":"state","in":"query","description":"（可选）设备状态（0=离线，1=在线）","required":false,"example":"","schema":{"type":"string"}},{"name":"typeID","in":"query","description":"（可选）设备模型","required":false,"example":"","schema":{"type":"string"}},{"name":"tags","in":"query","description":"（可选）设备标签","required":false,"example":"","schema":{"type":"string"}},{"name":"emptyGroup","in":"query","description":"（可选）只查询未分组设备","required":false,"example":"","schema":{"type":"boolean"}},{"name":"groupID","in":"query","description":"（可选）指定设备分组（emptyGroup为true时忽略此选项）","required":false,"example":"","schema":{"type":"string"}},{"name":"restrictGroup","in":"query","description":"（可选）指定 groupID 为严格匹配，不包含下级（默认包含下级）","required":false,"example":"","schema":{"type":"boolean"}},{"name":"search","in":"query","description":"（可选）设备标识或名称（模糊查询）","required":false,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"失败","content":{"application/json":{"schema":{"type":"object","required":["code"],"properties":{"code":{"type":"string","description":"错误码"},"msg":{"type":"string","description":"错误信息"}}},"example":"{\r\n    \"code\": \"err_not_found\"\r\n}"}}}}}},"/ems/open_api/v1/report/meters/monthly":{"get":{"summary":"逐月能耗","description":"查询指定时间范围内每个月的仪表能耗。\n\n必填参数：\n\n* `start`：起始月份\n* `end`：截止月份\n\n`start` 和 `end` 必须是 ISO 8601 完整时间格式（对应 [strptime(3)](https://linux.die.net/man/3/strptime) 格式 `\"%Y-%m-%dT%H:%M:%S%z\"`)，转换到服务器时区后，除年、月之外的部分被忽略，取闭区间。\n\n兼容参数：\n* `time`：如果只传一个时间参数 `time`，则截取对应时间的年份，取当年 1 月 `start`，12 月为 `end`\n\n可选参数：\n\n* `meterID` 或 `meterCode`：仪表标识，如果指定将导致返回值最多只有一条数据\n* `energyTypeID`：能源类型标识\n* `pageSize`：指定分页大小，不指定则返回所有仪表\n* `pageNum`：指定了 `pageSize` 时，用于指定页码，默认为 1；未指定 `pageSize` 时无效\n* `round`：忽略时返回原始值，设为 0 取值，设为 2 保留两位小数\n* `tags`：仪表标签，用法与[【设备数量（全局）】](?target_id=32be146d763000)接口类似\n\n返回数值始终为字符串形式（无数据为 `null`），例如原始值为 `\"975.6\"`，则 `round` 为 2 时返回 `\"975.60\"`。\n\n返回值中的时间为 [ECMA 扩展的 ISO 8601 格式](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-time-string-format) 精确到月份（`\"YYYY-MM\"`）。\n（JavaScript 兼容性提示：`Date` 构造函数只在一部分实现中支持[这种格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format)，并且有可能会使用 UTC 时区。）","tags":["能源管理/能耗报表/仪表能耗"],"parameters":[{"name":"meterID","in":"query","description":"（可选）仪表标识","required":false,"example":"","schema":{"type":"string"}},{"name":"meterCode","in":"query","description":"（可选）仪表编码","required":false,"example":"","schema":{"type":"string"}},{"name":"energyTypeID","in":"query","description":"（可选）能源类型标识","required":false,"example":"","schema":{"type":"string"}},{"name":"pageSize","in":"query","description":"（可选）分页大小","required":false,"example":"","schema":{"type":"integer"}},{"name":"pageNum","in":"query","description":"（可选）分页页码","required":false,"example":"","schema":{"type":"integer"}},{"name":"tags","in":"query","description":"（可选）仪表标签","required":false,"example":"","schema":{"type":"string"}},{"name":"start","in":"query","description":"起始月份","required":true,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"截止月份","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"properties":{"success":{"default":true,"description":"成功时为 true","type":"boolean"},"data":{"description":"返回数据","properties":{"total":{"description":"仪表总数","type":"integer"},"items":{"description":"仪表","items":{"properties":{"id":{"description":"仪表标识","type":"string"},"name":{"description":"仪表名称","type":"string"},"code":{"description":"仪表编号","type":"string"},"total":{"description":"指定时间段内的总能耗","type":["string","null"]},"values":{"description":"逐月能耗","items":{"APIPOST_ORDERS":["time","value"],"properties":{"time":{"description":"月份","type":"string"},"value":{"description":"此月能耗","type":["string","null"]}},"required":["time","value"],"title":"Items","type":"object"},"type":["array","null"]}},"required":["id"],"title":"Items","type":"object"},"type":"array"}},"required":["name","total","values","tota","items"],"type":"object"}},"required":["success","data"],"type":"object"},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": {\r\n\t\t\"total\": 1,\r\n\t\t\"items\": [\r\n\t\t\t{\r\n\t\t\t\t\"id\": \"cpemotk5naqkfr19scbg\",\r\n\t\t\t\t\"name\": \"装一车间电表\",\r\n\t\t\t\t\"code\": \"deivce_power_6\",\r\n\t\t\t\t\"total\": \"19679.43\",\r\n\t\t\t\t\"values\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"time\": \"2024-09\",\r\n\t\t\t\t\t\t\"value\": \"14845.83\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"time\": \"2024-10\",\r\n\t\t\t\t\t\t\"value\": \"4833.6\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"time\": \"2024-11\",\r\n\t\t\t\t\t\t\"value\": null\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}"}}}}}},"/ems/open_api/v1/report/meters/daily":{"get":{"summary":"逐日能耗","description":"查询指定时间范围内每天的仪表能耗。\n\n必填参数：\n\n* `start`：起始日期\n* `end`：截止日期\n\n`start` 和 `end` 必须是 ISO 8601 完整时间格式（对应 [strptime(3)](https://linux.die.net/man/3/strptime) 格式 `\"%Y-%m-%dT%H:%M:%S%z\"`)，转换到服务器时区后，除年、月、日之外的部分被忽略，取闭区间。\n\n兼容参数：\n* `time`：如果只传一个时间参数 `time`，则截取对应时间的年、月部分，取当月 1 日 `start`，最后一天为 `end`\n\n可选参数：\n\n* `meterID` 或 `meterCode`：仪表标识，如果指定将导致返回值最多只有一条数据\n* `energyTypeID`：能源类型标识\n* `pageSize`：指定分页大小，不指定则返回所有仪表\n* `pageNum`：指定了 `pageSize` 时，用于指定页码，默认为 1；未指定 `pageSize` 时无效\n* `round`：忽略时返回原始值，设为 0 取值，设为 2 保留两位小数\n* `tags`：仪表标签，用法与[【设备数量（全局）】](?target_id=32be146d763000)接口类似\n\n返回数值始终为字符串形式（无数据为 `null`），例如原始值为 `\"975.6\"`，则 `round` 为 2 时返回 `\"975.60\"`。\n\n返回值中的时间为 [ECMA 扩展的 ISO 8601 格式](https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-time-string-format) 精确到日（`\"YYYY-MM-DD\"`）。\n（JavaScript 兼容性提示：`Date` 构造函数只在一部分实现中支持[这种格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format)，并且有可能会使用 UTC 时区。）","tags":["能源管理/能耗报表/仪表能耗"],"parameters":[{"name":"meterID","in":"query","description":"（可选）仪表标识","required":false,"example":"","schema":{"type":"string"}},{"name":"meterCode","in":"query","description":"（可选）仪表编码","required":false,"example":"","schema":{"type":"string"}},{"name":"energyTypeID","in":"query","description":"（可选）能源类型标识","required":false,"example":"","schema":{"type":"string"}},{"name":"pageSize","in":"query","description":"（可选）分页大小","required":false,"example":"","schema":{"type":"string"}},{"name":"pageNum","in":"query","description":"（可选）分页页码","required":false,"example":"","schema":{"type":"string"}},{"name":"tags","in":"query","description":"（可选）仪表标签","required":false,"example":"","schema":{"type":"string"}},{"name":"start","in":"query","description":"起始日期","required":true,"example":"","schema":{"type":"string"}},{"name":"end","in":"query","description":"截止日期","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"properties":{"success":{"default":true,"description":"成功时为 true","type":"boolean"},"data":{"description":"返回数据","properties":{"total":{"description":"仪表总数","type":"integer"},"items":{"description":"仪表","items":{"properties":{"id":{"description":"仪表标识","type":"string"},"name":{"description":"仪表名称","type":"string"},"code":{"description":"仪表编号","type":"string"},"total":{"description":"指定时间段内的总能耗","type":["string","null"]},"values":{"description":"逐日能耗","items":{"APIPOST_ORDERS":["time","value"],"properties":{"time":{"description":"日期","type":"string"},"value":{"description":"此日能耗","type":["string","null"]}},"required":["time","value"],"title":"Items","type":"object"},"type":["array","null"]}},"required":["id"],"title":"Items","type":"object"},"type":"array"}},"required":["name","total","values","tota","items"],"type":"object"}},"required":["success","data"],"type":"object"},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": {\r\n\t\t\"total\": 1,\r\n\t\t\"items\": [\r\n\t\t\t{\r\n\t\t\t\t\"id\": \"cpemotk5naqkfr19scbg\",\r\n\t\t\t\t\"name\": \"装一车间电表\",\r\n\t\t\t\t\"code\": \"deivce_power_6\",\r\n\t\t\t\t\"total\": \"1458.03\",\r\n\t\t\t\t\"values\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"time\": \"2024-09-08\",\r\n\t\t\t\t\t\t\"value\": null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"time\": \"2024-09-09\",\r\n\t\t\t\t\t\t\"value\": \"777.51\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"time\": \"2024-09-10\",\r\n\t\t\t\t\t\t\"value\": \"680.52\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}"}}}}}},"/ems/open_api/v1/sector":{"get":{"summary":"用能单元","description":"查询所有用能单元。","tags":["能源管理"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success","data"],"properties":{"success":{"type":"boolean","description":"成功时为 true"},"data":{"type":"array","items":{"type":"object","title":"Items","required":["id","name","code"],"properties":{"id":{"type":"string","description":"用能单元标识"},"name":{"type":"string","description":"用能单元名称"},"code":{"type":"string","description":"用能单元编码","apipiost_allow_null":true},"parentID":{"type":"string","description":"父级用能单元标识"},"description":{"type":"string","description":"描述"}}},"description":"返回数据"}}},"example":"{\r\n    \"success\": true,\r\n\t\"data\": [\r\n\t\t{\r\n\t\t\t\"id\": \"5b5d77d655544fef87e357fc04b47d19\",\r\n\t\t\t\"name\": \"装三区\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"parentID\": \"ba33f8322f8a41bb803e0e75ac04fbf2\",\r\n            \"description\": \"dddd\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"ba33f8322f8a41bb803e0e75ac04fbf2\",\r\n\t\t\t\"name\": \"总装区\",\r\n\t\t\t\"code\": \"g\"\r\n\t\t}\r\n\t]\r\n}"}}}}}},"/ems/open_api/v1/energy_type":{"get":{"summary":"能源类型","description":"查询所有能源类型。","tags":["能源管理"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success","data"],"properties":{"success":{"type":"boolean","description":"成功时为 true"},"data":{"type":"array","items":{"type":"object","title":"Items","required":["id","name","unit"],"properties":{"id":{"type":"string","description":"能源类型标识"},"name":{"type":"string","description":"能源类型名称"},"unit":{"type":"string","description":"单位","apipiost_allow_null":true}}},"description":"返回数据"}}},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": [\r\n\t\t{\r\n\t\t\t\"id\": \"cpemf3c5naqkdv21hn5g\",\r\n\t\t\t\"name\": \"气\",\r\n\t\t\t\"unit\": \"m³\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"cpemf3c5naqkdv21hn60\",\r\n\t\t\t\"name\": \"油\",\r\n\t\t\t\"unit\": \"t\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"power\",\r\n\t\t\t\"name\": \"电\",\r\n\t\t\t\"unit\": \"kW·h\"\r\n\t\t}\r\n\t]\r\n}"}}}}}},"/ems/open_api/v1/subentry":{"get":{"summary":"能源分项","description":"查询所有能源分项。\n\n可选参数 `energyTypeID` 可指定能源类型查询。","tags":["能源管理"],"parameters":[{"name":"energyTypeID","in":"query","description":"（可选）能源类型标识","required":false,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success","data"],"properties":{"success":{"type":"boolean","description":"成功时为 true"},"data":{"type":"array","items":{"type":"object","title":"Items","required":["id","name","code","energyTypeID"],"properties":{"id":{"type":"string","description":"分项标识"},"name":{"type":"string","description":"分项名称"},"code":{"type":"string","description":"分项编码","apipiost_allow_null":true},"energyTypeID":{"type":"string","description":"所属能源类型标识"},"parentID":{"type":"string","description":"父级分项标识"}}},"description":"返回数据"}}},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": [\r\n\t\t{\r\n\t\t\t\"id\": \"cpemf3c5naqkdv21hn6g\",\r\n\t\t\t\"name\": \"汽油\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"energyTypeID\": \"cpemf3c5naqkdv21hn60\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"cpemf3c5naqkdv21hnd0\",\r\n\t\t\t\"name\": \"柴油\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"energyTypeID\": \"cpemf3c5naqkdv21hn60\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"cpemf3c5naqkdv21hncg\",\r\n\t\t\t\"name\": \"煤油\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"energyTypeID\": \"cpemf3c5naqkdv21hn60\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"cpemf3c5naqkdv21hn6g\",\r\n\t\t\t\"name\": \"#97 汽油\",\r\n\t\t\t\"code\": \"\",\r\n\t\t\t\"parentID\": \"cpemf3c5naqkdv21hn6g\",\r\n\t\t\t\"energyTypeID\": \"cpemf3c5naqkdv21hn60\"\r\n\t\t}\r\n\t]\r\n}"}}}}}},"/ems/open_api/v1/meter":{"get":{"summary":"仪表","description":"查询所有仪表。\n\n可选参数：\n\n* `energyTypeID`：指定能源类型\n* `pageSize`：指定分页大小，未指定时默认返回所有仪表\n* `pageNum`：指定分页页码，默认为1，`pageSize` 未指定则忽略\n* `tags`：仪表标签，用法与[【设备数量（全局）】](?target_id=32be146d763000)接口类似\n","tags":["能源管理"],"parameters":[{"name":"energyTypeID","in":"query","description":"（可选）能源类型标识","required":false,"example":"","schema":{"type":"string"}},{"name":"pageSize","in":"query","description":"（可选）分页大小","required":false,"example":"","schema":{"type":"integer"}},{"name":"pageNum","in":"query","description":"（可选）分页页码","required":false,"example":"","schema":{"type":"integer"}},{"name":"tags","in":"query","description":"（可选）仪表标签","required":false,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success","data2","data"],"properties":{"success":{"type":"boolean","description":"成功时为 true"},"data":{"type":"object","required":["total","items"],"properties":{"total":{"type":"integer","description":"仪表总数"},"items":{"type":"array","items":{"type":"object","title":"Items","required":["id","name","code","energyTypeID"],"properties":{"id":{"type":"string","description":"仪表标识"},"name":{"type":"string","description":"仪表名称"},"code":{"type":"string","description":"仪表编码","apipiost_allow_null":true},"energyTypeID":{"type":"string","description":"所属能源类型标识"},"description":{"type":"string","description":"描述"}}},"description":"返回数据"}},"description":"返回数据"}}},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": {\r\n\t\t\"total\": 32,\r\n\t\t\"items\": [\r\n\t\t\t{\r\n\t\t\t\t\"id\": \"cpemots5naqkfr19sce0\",\r\n\t\t\t\t\"name\": \"装一上水\",\r\n\t\t\t\t\"code\": \"device_water_3\",\r\n\t\t\t\t\"energyTypeID\": \"cpemf3c5naqkdv21hn40\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"id\": \"cpemotk5naqkfr19scbg\",\r\n\t\t\t\t\"name\": \"装二车间电表\",\r\n\t\t\t\t\"code\": \"deivce_power_5\",\r\n\t\t\t\t\"energyTypeID\": \"power\",\r\n\t\t\t\t\"description\": \"(virtual)\"\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}"}}}}}},"/iot/open_api/v1/misc/platform/overview":{"get":{"summary":"设备总览","description":"查询横跨所有租户和项目的设备总览数据。\n如果指定了 `tenantID` 则只查询指定租户下的项目。\n\n需要在请求中指定需要查询的字段：\n\n* `deviceCount`：设备总数\n* `deviceTypeCount`：设备模型总数\n* `gatewayCount`：网关数\n* `pointCount`：点位数\n* `onlineDeviceCount`：在线设备数\n* `offlineDeviceCount`：离线设备数\n* `alertDeviceCount`：告警设备数（存在活动告警的设备数量）\n\n请求中将需要查询的字段设为 `1` 或 `true` 时，响应中会存在同名字段。","tags":["租户看板"],"parameters":[{"name":"tenantID","in":"query","description":"租户 ID，未指定则查询所有项目","required":false,"example":"","schema":{"type":"string"}},{"name":"deviceCount","in":"query","description":"设为 1 或 true 查询设备总数","required":false,"example":"","schema":{"type":"boolean"}},{"name":"deviceTypeCount","in":"query","description":"设为 1 或 true 查询设备模型总数","required":false,"example":"","schema":{"type":"boolean"}},{"name":"gatewayCount","in":"query","description":"设为 1 或 true 查询网关数","required":false,"example":"","schema":{"type":"boolean"}},{"name":"pointCount","in":"query","description":"设为 1 或 true 查询点位数","required":false,"example":"","schema":{"type":"boolean"}},{"name":"onlineDeviceCount","in":"query","description":"设为 1 或 true 查询在线设备数","required":false,"example":"","schema":{"type":"boolean"}},{"name":"offlineDeviceCount","in":"query","description":"设为 1 或 true 查询离线设备数","required":false,"example":"","schema":{"type":"boolean"}},{"name":"alertDeviceCount","in":"query","description":"设为 1 或 true 查询告警设备数","required":false,"example":"","schema":{"type":"boolean"}},{"name":"X-API-KEY","in":"header","description":"认证密钥","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["succss"],"properties":{"succss":{"type":"boolean","default":true,"description":"成功时为true"},"data":{"type":"object","required":[],"properties":{"deviceCount":{"type":"integer","description":"设备总数"},"deviceTypeCount":{"type":"integer","description":"设备模型总数"},"gatewayCount":{"type":"integer","description":"网关数"},"pointCount":{"type":"integer","description":"点位数"},"onlineDeviceCount":{"type":"integer","description":"在线设备数"},"offlineDeviceCount":{"type":"integer","description":"离线设备数"},"alertDeviceCount":{"type":"integer","description":"告警设备数"}},"description":"返回数据"}}},"example":"{\r\n    \"success\": true,\r\n    \"data\": {\r\n        \"deviceCount\": 248,\r\n        \"deviceTypeCount\": 22,\r\n        \"gatewayCount\": 250,\r\n        \"pointCount\": 3899,\r\n        \"onlineDeviceCount\": 245,\r\n        \"offlineDeviceCount\": 3,\r\n        \"alertDeviceCount\": 12\r\n    }\r\n}"}}}}}},"/iot/open_api/v1/misc/platform/device_count/type":{"get":{"summary":"各设备模型下的设备数","description":"\n查询横跨所有租户和项目的设备模型，及对应模型下的设备总数。\n如果指定了 `tenantID` 则只查询指定租户下的设备模型。\n\n查询参数 `pageSize` 和 `pageNum` 用于分页。\n\n返回的设备模型按照 `deviceCount` 从大到小排序。","tags":["租户看板"],"parameters":[{"name":"tenantID","in":"query","description":"租户 ID，未指定则查询所有项目","required":false,"example":"","schema":{"type":"string"}},{"name":"pageSize","in":"query","description":"分页大小，默认 10","required":false,"example":"","schema":{"type":"integer"}},{"name":"pageNum","in":"query","description":"当前分页，默认 1","required":false,"example":"","schema":{"type":"integer"}},{"name":"X-API-KEY","in":"header","description":"认证密钥","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","default":true,"description":"成功时为 true"},"data":{"type":"object","items":{"type":"object","title":"Items","description":"一个设备模型"},"required":["total"],"properties":{"total":{"type":"integer","description":"设备模型总数"},"items":{"type":"array","items":{"type":"object","title":"Items","required":[],"properties":{"projectID":{"type":"string","description":"设备模型所属项目 ID"},"id":{"type":"string","description":"设备模型 ID，只在所属项目下唯一"},"name":{"type":"string","description":"设备模型名称"},"deviceCount":{"type":"integer","description":"设备模型下的设备总数"}},"description":"一个设备模型"},"description":"当前分页下的设备模型"}},"description":"返回数据"}}},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": {\r\n\t\t\"total\": 20,\r\n\t\t\"items\": [\r\n\t\t\t{\r\n\t\t\t\t\"projectID\": \"iotopo\",\r\n\t\t\t\t\"id\": \"D_FAN\",\r\n\t\t\t\t\"name\": \"风机\",\r\n\t\t\t\t\"deviceCount\": 72\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}"}}}}}},"/alert/open_api/v1/misc/platform/overview":{"get":{"summary":"告警总览","description":"查询横跨所有租户和项目的告警总览数据。\n如果指定了 `tenantID` 则只查询指定租户下的项目。\n\n需要在请求中指定需要查询的字段：\n\n* `alerts`：告警总数\n* `alertsToday`：今日告警总数\n* `activeAlerts`：活动告警数\n* `activeAlertsToday`：今日活动告警数\n\n请求中将需要查询的字段设为 `1` 或 `true` 时，响应中会存在同名字段。","tags":["租户看板"],"parameters":[{"name":"tenantID","in":"query","description":"租户 ID，未指定则查询所有项目","required":false,"example":"","schema":{"type":"string"}},{"name":"alerts","in":"query","description":"设为 1 或 true 时，查询告警总数","required":false,"example":"","schema":{"type":"boolean"}},{"name":"alertsToday","in":"query","description":"设为 1 或 true 时，查询今日告警总数","required":false,"example":"","schema":{"type":"boolean"}},{"name":"activeAlerts","in":"query","description":"设为 1 或 true 时，查询活动告警数","required":false,"example":"","schema":{"type":"boolean"}},{"name":"activeAlertsToday","in":"query","description":"设为 1 或 true 时，查询今日活动告警数","required":false,"example":"","schema":{"type":"boolean"}},{"name":"X-API-KEY","in":"header","description":"认证密钥","required":true,"example":"","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean","default":true,"description":"成功时为 true"},"data":{"type":"object","required":[],"properties":{"alerts":{"type":"integer","description":"告警总数"},"alertsToday":{"type":"integer","description":"今日告警总数"},"activeAlerts":{"type":"integer","description":"活动告警数"},"activeAlertsToday":{"type":"integer","description":"今日活动告警数"}},"description":"返回数据"}}},"example":"{\r\n\t\"success\": true,\r\n\t\"data\": {\r\n\t\t\"alerts\": 215520,\r\n\t\t\"alertsToday\": 32,\r\n\t\t\"activeAlerts\": 61,\r\n\t\t\"activeAlertsToday\": 9\r\n\t}\r\n}"}}}}}},"/iot/open_api/v1/data/query_device":{"post":{"summary":"设备历史数据查询","description":"","tags":["数据接口/历史数据查询"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object"},"example":"{\n\t\"deviceID\": \"Dev01\",\n\t\"points\": [\n\t\t{\n\t\t\t\"pointID\": \"V2\", \"aggregations\": [\"last\",\"max\",\"min\",\"difference\"]\n\t\t},\n\t\t{\n\t\t\t\"pointID\": \"V3\"\n\t\t}\n\t],\n\t\"start\": \"2025-05-29T04:58:17.469Z\",\n\t\"end\": \"2025-05-29T05:08:17.469Z\",\n\t\"aggregation\": \"last\",\n\t\"interval\": \"20s\",\n\t\"offset\": 0,\n\t\"limit\": 5000\n}"}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"properties":{"data":{"properties":{"results":{"items":{"properties":{"deviceID":{"description":"设备标识","mock":{"mock":"@string( deviceID, 1, 10 )"},"type":"string"},"pointID":{"description":"点位标识","mock":{"mock":"@string( pointID, 1, 10 )"},"type":"string"},"values":{"items":{"properties":{"value":{"anyOf":[{"type":"string"},{"mock":{"mock":""},"type":"number"},{"type":"boolean"}],"description":"返回值","type":"anyOf"},"time":{"description":"时间戳，ISO 8601格式: YYYY-MM-DDTHH:MM:SSZ","mock":{"mock":"@datetime('yyyy-MM-dd HH:mm:ss')"},"type":"string"}},"required":[],"title":"Items","type":"object"},"type":"array"}},"required":[],"title":"Items","type":"object"},"type":"array"}},"required":[],"type":"object"},"success":{"description":"响应状态，true 表示成功 false 表示失败","type":"boolean"}},"required":[],"type":"object"},"example":"{\n\t\"data\": {\n\t\t\"results\": [\n\t\t\t{\n\t\t\t\t\"deviceID\": \"YG01\",\n\t\t\t\t\"pointID\": \"T\",\n\t\t\t\t\"values\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"value\": false,\n\t\t\t\t\t\t\"time\": \"1982-07-03 11:03:29\"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t},\n\t\"success\": false\n}"}}},"404":{"description":"失败","content":{"application/json":{"schema":[],"example":""}}}}}}},"tags":[{"name":"设备","description":""},{"name":"数据接口","description":""},{"name":"实时数据查询","description":""},{"name":"控制指令下发","description":""},{"name":"告警中心","description":""},{"name":"设备分组","description":""},{"name":"历史数据查询","description":""},{"name":"维护管理","description":""},{"name":"设备互联","description":""},{"name":"设备模型","description":""},{"name":"告警等级","description":""},{"name":"告警类型","description":""},{"name":"告警记录","description":""},{"name":"告警规则","description":""},{"name":"全局变量","description":""},{"name":"能源管理","description":""},{"name":"能耗报表","description":""},{"name":"单仪表能耗","description":""},{"name":"用能单元能耗","description":""},{"name":"分项能耗","description":""},{"name":"网关","description":""},{"name":"告警工单","description":""},{"name":"现场工单","description":""},{"name":"维护工单","description":""},{"name":"计划工单","description":""},{"name":"设备绩效","description":""},{"name":"仪表能耗","description":""},{"name":"租户看板","description":""}]}